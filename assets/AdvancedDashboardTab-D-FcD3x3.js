var Ze=Object.defineProperty;var Je=(t,a,s)=>a in t?Ze(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s;var je=(t,a,s)=>Je(t,typeof a!="symbol"?a+"":a,s);import{c as A,a as H,s as P,r as N,j as e,v as Le,w as S,D as De,x as es,t as M,y as ss,z as ts,F as ve,R as W,G as rs,B as R,E as as,C as j,b as f,f as v,H as $,J as I,Z as Y,K as ns,L as B,M as T,d as b,N as Z,O as is,Q as Ee,V as $e,W as V,X as O,Y as E,_ as K,$ as J,a0 as ls,I as cs,a1 as fe,a2 as os,a3 as ds,a4 as xs,T as be,m as ye,n as F,o as C,p as Ne,q as w,a5 as ms,A as Ie,l as ze,a6 as hs,e as we,P as us}from"./index-BvfD8e6h.js";import{u as qe}from"./useAnalyticsTableData-DIUKNTPy.js";import{D as Fe,A as gs,a as ps}from"./download-BEyEohb2.js";import{T as D}from"./trending-down-mIGO748l.js";import{u as js,R as vs}from"./responsive-layout-BzM0jDVG.js";import{S as _e}from"./search-B0QV0sYq.js";import{R as fs,L as bs,C as ys,X as Ns,Y as ws,T as _s,a as ks,b as ke}from"./LineChart-BVsnQIy4.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=A("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=A("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=A("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=A("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=A("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=A("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=A("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=A("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=A("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=A("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=A("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),Ls=t=>H({queryKey:["organization-stats",t],queryFn:async()=>{const{data:a,error:s}=await P.rpc("get_organization_stats",{org_id:t});if(s)throw s;return a},enabled:!!t,staleTime:3e4,refetchInterval:6e4});function Es(t,a=[]){let s=[];function d(l,o){const c=N.createContext(o),m=s.length;s=[...s,o];function n(i){const{scope:r,children:h,...p}=i,y=(r==null?void 0:r[t][m])||c,_=N.useMemo(()=>p,Object.values(p));return e.jsx(y.Provider,{value:_,children:h})}function g(i,r){const h=(r==null?void 0:r[t][m])||c,p=N.useContext(h);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${i}\` must be used within \`${l}\``)}return n.displayName=l+"Provider",[n,g]}const x=()=>{const l=s.map(o=>N.createContext(o));return function(c){const m=(c==null?void 0:c[t])||l;return N.useMemo(()=>({[`__scope${t}`]:{...c,[t]:m}}),[c,m])}};return x.scopeName=t,[d,$s(x,...a)]}function $s(...t){const a=t[0];if(t.length===1)return a;const s=()=>{const d=t.map(x=>({useScope:x(),scopeName:x.scopeName}));return function(l){const o=d.reduce((c,{useScope:m,scopeName:n})=>{const i=m(l)[`__scope${n}`];return{...c,...i}},{});return N.useMemo(()=>({[`__scope${a.scopeName}`]:o}),[o])}};return s.scopeName=a.scopeName,s}var ee="Progress",se=100,[Is,xt]=Es(ee),[zs,qs]=Is(ee),Qe=N.forwardRef((t,a)=>{const{__scopeProgress:s,value:d=null,max:x,getValueLabel:l=Fs,...o}=t;(x||x===0)&&!Me(x)&&console.error(Vs(`${x}`,"Progress"));const c=Me(x)?x:se;d!==null&&!Re(d,c)&&console.error(Os(`${d}`,"Progress"));const m=Re(d,c)?d:null,n=U(m)?l(m,c):void 0;return e.jsx(zs,{scope:s,value:m,max:c,children:e.jsx(Le.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":U(m)?m:void 0,"aria-valuetext":n,role:"progressbar","data-state":Ue(m,c),"data-value":m??void 0,"data-max":c,...o,ref:a})})});Qe.displayName=ee;var Be="ProgressIndicator",Ke=N.forwardRef((t,a)=>{const{__scopeProgress:s,...d}=t,x=qs(Be,s);return e.jsx(Le.div,{"data-state":Ue(x.value,x.max),"data-value":x.value??void 0,"data-max":x.max,...d,ref:a})});Ke.displayName=Be;function Fs(t,a){return`${Math.round(t/a*100)}%`}function Ue(t,a){return t==null?"indeterminate":t===a?"complete":"loading"}function U(t){return typeof t=="number"}function Me(t){return U(t)&&!isNaN(t)&&t>0}function Re(t,a){return U(t)&&!isNaN(t)&&t<=a&&t>=0}function Vs(t,a){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${a}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${se}\`.`}function Os(t,a){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${a}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${se} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var He=Qe,Qs=Ke;const G=N.forwardRef(({className:t,value:a,...s},d)=>e.jsx(He,{ref:d,className:S("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...s,children:e.jsx(Qs,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(a||0)}%)`}})}));G.displayName=He.displayName;const Ae=({actions:t,title:a="Actions",className:s,buttonVariant:d="ghost",buttonSize:x="sm"})=>{const l=o=>{switch(o){case"destructive":return"text-red-600 hover:text-red-700 focus:text-red-700 hover:bg-red-50 focus:bg-red-50";case"secondary":return"text-gray-600 hover:text-gray-700 focus:text-gray-700";default:return"text-gray-700 hover:text-gray-900 focus:text-gray-900"}};return e.jsxs(De,{children:[e.jsx(es,{asChild:!0,children:e.jsxs(M,{variant:d,size:x,className:S("h-8 w-8 p-0 opacity-0 group-hover:opacity-100 transition-opacity duration-200","hover:bg-gray-100 dark:hover:bg-gray-800","focus:opacity-100 focus:ring-2 focus:ring-orange-200 dark:focus:ring-orange-800",s),children:[e.jsx(As,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:a})]})}),e.jsxs(ss,{className:"w-56 bg-white/95 backdrop-blur-sm border shadow-xl",align:"end",side:"bottom",children:[e.jsx(ts,{className:"font-semibold text-gray-900",children:a}),e.jsx(ve,{}),t.map((o,c)=>e.jsxs(W.Fragment,{children:[e.jsxs(rs,{onClick:o.onClick,className:S("flex items-center justify-between cursor-pointer py-2.5 px-3","transition-colors duration-150",l(o.variant)),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(o.icon,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:o.label})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[o.badge&&e.jsx(R,{variant:"secondary",className:"text-xs",children:o.badge}),o.shortcut&&e.jsx("kbd",{className:"hidden sm:inline-flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium text-muted-foreground",children:o.shortcut})]})]}),o.separator&&e.jsx(ve,{})]},o.id))]})]})},Bs=(t,a,s)=>[{id:"view-details",label:"View Details",icon:as,onClick:t,shortcut:"⌘D"},{id:"export-data",label:"Export Data",icon:Fe,onClick:a,shortcut:"⌘E"},{id:"share",label:"Share",icon:Ps,onClick:s,separator:!0},{id:"bookmark",label:"Bookmark",icon:Ss,onClick:()=>console.log("Bookmark"),variant:"secondary"}],Ks=({title:t,value:a,previousValue:s,change:d,secondaryMetrics:x=[],icon:l,status:o="normal",actionLabel:c,onAction:m,onDrillDown:n,contextualActions:g=[],insights:i=[],className:r,hideActions:h=!1})=>{const p=u=>{switch(u){case"warning":return"border-l-amber-500 bg-gradient-to-br from-amber-50/80 to-orange-50/50";case"critical":return"border-l-red-500 bg-gradient-to-br from-red-50/80 to-pink-50/50";case"success":return"border-l-green-500 bg-gradient-to-br from-green-50/80 to-emerald-50/50";default:return"border-l-orange-500 bg-gradient-to-br from-orange-50/50 to-amber-50/30"}},y=u=>{switch(u){case"warning":return e.jsx(I,{className:"w-4 h-4 text-amber-600"});case"critical":return e.jsx(I,{className:"w-4 h-4 text-red-600"});case"success":return e.jsx($,{className:"w-4 h-4 text-green-600"});default:return null}},_=u=>{switch(u){case"up":return e.jsx(ps,{className:"w-3 h-3 text-green-600"});case"down":return e.jsx(gs,{className:"w-3 h-3 text-red-600"});default:return e.jsx(Ve,{className:"w-3 h-3 text-gray-500"})}},Q=u=>{switch(u){case"up":return"text-green-700 bg-green-100 border-green-200";case"down":return"text-red-700 bg-red-100 border-red-200";default:return"text-gray-700 bg-gray-100 border-gray-200"}},z=u=>{switch(u){case"good":return"text-green-700";case"warning":return"text-amber-700";case"critical":return"text-red-700";default:return"text-gray-700"}},q=h?[]:Bs(()=>n==null?void 0:n(),()=>console.log("Export metric data"),()=>console.log("Share metric"));return e.jsxs(j,{variant:"elevated",className:S("group hover:shadow-2xl transition-all duration-300 border-l-4 hover:-translate-y-2","bg-gradient-to-br from-white via-orange-50/30 to-amber-50/20 backdrop-blur-sm",p(o),r),children:[e.jsxs(f,{className:"flex flex-row items-start justify-between space-y-0 pb-6",children:[e.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[e.jsx("div",{className:"p-4 rounded-2xl bg-white shadow-lg ring-2 ring-black/5",children:e.jsx(l,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{className:"space-y-3 flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-bold text-gray-700 tracking-tight",children:t}),e.jsxs("div",{className:"flex items-center space-x-2",children:[y(o),!h&&n&&e.jsx(M,{variant:"ghost",size:"sm",onClick:n,className:"opacity-0 group-hover:opacity-100 transition-opacity p-2 h-8 w-8 hover:bg-orange-50",children:e.jsx(Ce,{className:"w-4 h-4 text-gray-500"})})]})]}),e.jsxs("div",{className:"flex items-baseline space-x-4",children:[e.jsx("span",{className:"text-4xl font-bold text-gray-900 tracking-tight",children:typeof a=="number"?a.toLocaleString():a}),s&&e.jsxs("span",{className:"text-sm text-gray-500 font-medium",children:["from ",typeof s=="number"?s.toLocaleString():s]})]}),d&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(R,{variant:"secondary",className:S("text-sm px-3 py-1 font-bold border-2 shadow-sm",Q(d.trend)),children:e.jsxs("span",{className:"flex items-center space-x-2",children:[_(d.trend),e.jsxs("span",{children:[d.trend==="up"?"+":d.trend==="down"?"-":"",Math.abs(d.value),"%"]})]})}),e.jsxs("span",{className:"text-sm text-gray-600 font-medium",children:["vs ",d.period]})]})]})]}),!h&&q.length>0&&e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(Ae,{actions:q,title:`${t} Actions`,className:"opacity-0 group-hover:opacity-100 transition-opacity"})})]}),e.jsxs(v,{className:"pt-0 space-y-6",children:[x.length>0&&e.jsx("div",{className:"grid grid-cols-2 gap-6",children:x.map((u,L)=>e.jsxs("div",{className:"space-y-3 p-4 bg-white/70 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow group/metric",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-600",children:u.label}),e.jsxs("div",{className:"flex items-center space-x-2",children:[u.trend&&e.jsxs("div",{className:"flex items-center space-x-2",children:[_(u.trend),u.change&&e.jsxs("span",{className:S("text-sm font-bold",z(u.status||"good")),children:[u.change.value>0?"+":"",u.change.value,"%"]})]}),!h&&e.jsx(Ae,{actions:[{id:"view-metric",label:"View Details",icon:Ce,onClick:()=>console.log(`View ${u.label} details`)}],title:`${u.label} Actions`,className:"opacity-0 group-hover/metric:opacity-100 transition-opacity",buttonSize:"sm"})]})]}),e.jsx("div",{className:"flex items-baseline space-x-3",children:e.jsx("span",{className:S("text-xl font-bold",z(u.status||"good")),children:typeof u.value=="number"?u.value.toLocaleString():u.value})}),u.target&&typeof u.value=="number"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 font-medium",children:"Target"}),e.jsxs("span",{className:"font-bold text-gray-900",children:[Math.round(u.value/u.target*100),"%"]})]}),e.jsx(G,{value:u.value/u.target*100,className:"h-2 bg-gray-100"})]})]},L))}),i.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-gray-200 to-transparent"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-700 uppercase tracking-wider",children:"Key Insights"}),i.map((u,L)=>e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed pl-4 border-l-2 border-orange-200",children:u},L))]})]}),!h&&(c||g.length>0)&&e.jsxs("div",{className:"pt-4 space-y-3",children:[e.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-gray-200 to-transparent"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[c&&m&&e.jsx(M,{variant:"outline",size:"sm",onClick:m,className:"flex-1 text-sm font-semibold opacity-0 group-hover:opacity-100 transition-opacity hover:bg-orange-50 hover:border-orange-200 hover:text-orange-700 shadow-sm",children:c}),g.map((u,L)=>e.jsxs(M,{variant:"ghost",size:"sm",onClick:u.onClick,className:"text-sm opacity-0 group-hover:opacity-100 transition-opacity hover:bg-gray-50",children:[u.icon&&e.jsx(u.icon,{className:"w-4 h-4 mr-2"}),u.label]},L))]})]})]})]})},Us=({metrics:t,title:a="System Overview",lastUpdated:s,onRefresh:d,isRefreshing:x=!1})=>{const l=i=>{switch(i){case"good":return e.jsx($,{className:"w-4 h-4 text-green-600"});case"warning":return e.jsx(B,{className:"w-4 h-4 text-amber-600"});case"critical":return e.jsx(B,{className:"w-4 h-4 text-red-600"});default:return null}},o=i=>{switch(i){case"good":return"text-green-800 bg-green-50/80 border-green-200 ring-green-100/50";case"warning":return"text-amber-800 bg-amber-50/80 border-amber-200 ring-amber-100/50";case"critical":return"text-red-800 bg-red-50/80 border-red-200 ring-red-100/50";default:return"text-gray-800 bg-gray-50/80 border-gray-200 ring-gray-100/50"}},c=i=>{switch(i){case"up":return e.jsx(T,{className:"w-3 h-3 text-green-600"});case"down":return e.jsx(D,{className:"w-3 h-3 text-red-600"});default:return null}},n=(()=>{const i=t.filter(h=>h.status==="critical").length,r=t.filter(h=>h.status==="warning").length;return i>0?"critical":r>0?"warning":"good"})(),g=Math.round(t.filter(i=>i.status==="good").length/t.length*100);return e.jsx(j,{variant:"glass",className:"border-0 shadow-xl ring-1 ring-black/5",children:e.jsxs(v,{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("div",{className:"flex items-center space-x-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-4 bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl shadow-lg",children:e.jsx(Y,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:a}),e.jsxs("div",{className:S("flex items-center space-x-3 px-4 py-2 rounded-full text-sm font-bold ring-2 shadow-sm",o(n)),children:[l(n),e.jsx("span",{className:"capitalize",children:n}),e.jsxs("span",{className:"text-xs opacity-80",children:["• ",g,"%"]})]})]}),s&&e.jsxs("p",{className:"text-sm text-gray-600 mt-2 flex items-center space-x-2",children:[e.jsx("span",{children:s}),e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]})]})]})}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(M,{variant:"ghost",size:"default",className:"h-10 w-10 p-0 hover:bg-gray-100",children:e.jsx(ns,{className:"w-5 h-5"})})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:t.map((i,r)=>e.jsxs("div",{className:S("relative p-6 rounded-2xl border-2 ring-2 transition-all duration-300 hover:shadow-xl hover:-translate-y-2 group cursor-pointer",o(i.status)),children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:i.label}),i.trend&&c(i.trend)]}),i.description&&e.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:i.description})]}),l(i.status)]}),e.jsxs("div",{className:"flex items-baseline space-x-3 mb-3",children:[e.jsx("span",{className:"text-3xl font-bold text-gray-900 tracking-tight",children:typeof i.value=="number"?i.value.toLocaleString():i.value}),i.change&&e.jsxs("span",{className:S("text-sm font-semibold px-2 py-1 rounded-full flex items-center space-x-1",i.change.value>=0?"text-green-700 bg-green-100/80":"text-red-700 bg-red-100/80"),children:[c(i.change.value>=0?"up":"down"),e.jsxs("span",{children:[i.change.value>0?"+":"",i.change.value,"%"]})]})]}),i.change&&e.jsxs("p",{className:"text-xs text-gray-600 mb-3 font-medium",children:["vs ",i.change.period]}),i.target&&typeof i.value=="number"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Progress to Target"}),e.jsxs("span",{className:"font-bold text-gray-900",children:[Math.round(i.value/i.target*100),"%"]})]}),e.jsx(G,{value:Math.min(i.value/i.target*100,100),className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["Current: ",typeof i.value=="number"?i.value.toLocaleString():i.value]}),e.jsxs("span",{children:["Target: ",i.target.toLocaleString()]})]})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-500/10 to-amber-500/10 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"})]},r))}),e.jsx("div",{className:"mt-10 pt-8 border-t border-gray-200/60",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-8 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full shadow-sm"}),e.jsxs("span",{className:"text-gray-700 font-semibold",children:[t.filter(i=>i.status==="good").length," Excellent"]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-4 h-4 bg-amber-500 rounded-full shadow-sm"}),e.jsxs("span",{className:"text-gray-700 font-semibold",children:[t.filter(i=>i.status==="warning").length," Needs Attention"]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-4 h-4 bg-red-500 rounded-full shadow-sm"}),e.jsxs("span",{className:"text-gray-700 font-semibold",children:[t.filter(i=>i.status==="critical").length," Critical"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse shadow-sm"}),e.jsx("span",{className:"font-semibold",children:"Live monitoring active"})]})]})})]})})};class Ge extends W.Component{constructor(s){super(s);je(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0})});this.state={hasError:!1}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,d){console.error("Dashboard Error:",s,d)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsxs(j,{className:"border-destructive",children:[e.jsx(f,{children:e.jsxs(b,{className:"flex items-center text-destructive",children:[e.jsx(I,{className:"w-5 h-5 mr-2"}),"Dashboard Error"]})}),e.jsxs(v,{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"Something went wrong while loading the dashboard. Please try again."}),this.state.error&&e.jsxs("details",{className:"text-sm text-muted-foreground",children:[e.jsx("summary",{children:"Error details"}),e.jsx("pre",{className:"mt-2 text-xs",children:this.state.error.message})]}),e.jsxs(M,{onClick:this.handleRetry,variant:"outline",children:[e.jsx(Oe,{className:"w-4 h-4 mr-2"}),"Try Again"]})]})]}):this.props.children}}const Xe=({onRetry:t})=>e.jsx(j,{className:"border-destructive",children:e.jsxs(v,{className:"p-6 text-center",children:[e.jsx(I,{className:"w-12 h-12 text-destructive mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Unable to load dashboard"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"There was an error loading your dashboard data."}),e.jsxs(M,{onClick:t,variant:"outline",children:[e.jsx(Oe,{className:"w-4 h-4 mr-2"}),"Retry"]})]})}),Hs=({organizationId:t,onTabChange:a=()=>{}})=>{var y,_,Q,z,q,u,L,te,re,ae,ne,ie,le,ce,oe,de,xe,me,he,ue,ge,pe;const{data:s,isLoading:d,error:x,refetch:l}=qe(t),[o,c]=N.useState("overview");if(js(),x)return e.jsx(Xe,{onRetry:()=>l()});const m=()=>{if(!(s!=null&&s.summary)||s.summary.total_sessions===0)return 0;const{overall_completion_rate:k,user_satisfaction_rate:X,response_rate:We}=s.summary,Ye=k*.4+X*.4+We*.2;return Math.round(Math.min(100,Math.max(0,Ye)))},n=()=>s!=null&&s.summary&&s.summary.growth_rate||0,g=k=>k>5?"up":k<-5?"down":"stable",i=k=>k<=5?k:k<=100?k/100*5:Math.min(5,k/20),r=(y=s==null?void 0:s.summary)!=null&&y.avg_score?i(s.summary.avg_score):0,h=[{title:"Response Collection",value:((_=s==null?void 0:s.summary)==null?void 0:_.total_responses)||0,previousValue:Math.max(0,(((Q=s==null?void 0:s.summary)==null?void 0:Q.total_responses)||0)-45),icon:Z,change:{value:Math.abs(n()),period:"last 30 days",trend:g(n())},secondaryMetrics:[{label:"This Week",value:Math.round((((z=s==null?void 0:s.summary)==null?void 0:z.total_responses)||0)*.18),trend:g(12),status:"good"},{label:"Completion Rate",value:`${((q=s==null?void 0:s.summary)==null?void 0:q.overall_completion_rate)||0}%`,trend:g(((u=s==null?void 0:s.summary)==null?void 0:u.overall_completion_rate)>=80?10:-10),status:(((L=s==null?void 0:s.summary)==null?void 0:L.overall_completion_rate)||0)>=80?"good":"warning"},{label:"Response Rate",value:`${((te=s==null?void 0:s.summary)==null?void 0:te.response_rate)||0}%`,trend:g(((re=s==null?void 0:s.summary)==null?void 0:re.response_rate)>=70?10:-10),status:(((ae=s==null?void 0:s.summary)==null?void 0:ae.response_rate)||0)>=70?"good":"warning"}],status:"success",insights:[`${((ne=s==null?void 0:s.summary)==null?void 0:ne.total_responses)||0} total responses collected`,`${((ie=s==null?void 0:s.summary)==null?void 0:ie.overall_completion_rate)||0}% completion rate achieved`,`Growth rate: ${n()>=0?"+":""}${n()}% this month`]},{title:"User Engagement",value:((le=s==null?void 0:s.summary)==null?void 0:le.total_sessions)||0,previousValue:Math.max(0,(((ce=s==null?void 0:s.summary)==null?void 0:ce.total_sessions)||0)-15),icon:is,change:{value:Math.abs(n()),period:"last 30 days",trend:g(n())},secondaryMetrics:[{label:"Completed Sessions",value:((oe=s==null?void 0:s.summary)==null?void 0:oe.completed_sessions)||0,trend:g(5),status:"good"},{label:"User Satisfaction",value:`${((de=s==null?void 0:s.summary)==null?void 0:de.user_satisfaction_rate)||0}%`,trend:g(((xe=s==null?void 0:s.summary)==null?void 0:xe.user_satisfaction_rate)>=80?10:-10),status:(((me=s==null?void 0:s.summary)==null?void 0:me.user_satisfaction_rate)||0)>=80?"good":"warning"},{label:"Avg Score",value:`${r.toFixed(1)}/5`,trend:g(r>=4?10:r>=3?0:-10),status:r>=4?"good":r>=3?"warning":"critical"}],status:"success",insights:[`${((he=s==null?void 0:s.summary)==null?void 0:he.completed_sessions)||0} sessions completed successfully`,`${((ue=s==null?void 0:s.summary)==null?void 0:ue.user_satisfaction_rate)||0}% user satisfaction rate`,`Average score: ${r.toFixed(1)}/5 stars`]}],p=[{label:"Overall Performance Score",value:`${m()}%`,status:m()>=80?"good":m()>=60?"warning":"critical",trend:g(n()),target:100,description:"Composite performance across all metrics",change:{value:Math.abs(n()),period:"this month"}},{label:"User Satisfaction",value:`${((ge=s==null?void 0:s.summary)==null?void 0:ge.user_satisfaction_rate)||0}%`,status:(((pe=s==null?void 0:s.summary)==null?void 0:pe.user_satisfaction_rate)||0)>=80?"good":"warning",trend:g(8),description:"Percentage of users rating 4+ stars",change:{value:8,period:"vs last month"}},{label:"Growth Trajectory",value:`${n()>=0?"+":""}${n()}%`,status:n()>=0?"good":"warning",trend:g(n()),description:"Month-over-month growth rate",change:{value:Math.abs(n()),period:"acceleration"}}];return e.jsx(Ge,{children:e.jsxs("div",{className:"space-y-6 max-w-full overflow-hidden",children:[e.jsx(Us,{metrics:p,title:"Performance Dashboard",lastUpdated:"Live • Updated 30s ago",onRefresh:()=>l(),isRefreshing:d}),e.jsxs(Ee,{value:o,onValueChange:c,className:"w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 space-y-4 sm:space-y-0",children:[e.jsxs($e,{className:"grid w-full max-w-md grid-cols-3",children:[e.jsx(V,{value:"overview",children:"Overview"}),e.jsx(V,{value:"analytics",children:"Analytics"}),e.jsx(V,{value:"insights",children:"Insights"})]}),e.jsxs(R,{variant:"outline",className:"flex items-center space-x-2 self-start sm:self-auto",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs",children:"Real-time Data"})]})]}),e.jsx(O,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Key Performance Indicators"}),e.jsxs(R,{variant:"secondary",className:"text-xs font-medium self-start sm:self-auto",children:[e.jsx(T,{className:"w-3 h-3 mr-1"}),n()>=0?"Positive":"Negative"," trending metrics"]})]}),e.jsx(vs,{columns:{xs:1,sm:1,md:2,lg:2,xl:2},gap:"lg",className:"w-full",children:h.map((k,X)=>e.jsx(Ks,{...k,hideActions:!0},X))})]})}),e.jsx(O,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(E,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Detailed Analytics"}),e.jsx("p",{className:"text-base text-gray-600 mb-4",children:"Advanced analytics and trend analysis"}),e.jsx(M,{onClick:()=>a("feedback"),children:"View Analytics Dashboard"})]})}),e.jsx(O,{value:"insights",className:"space-y-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(K,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"AI-Powered Insights"}),e.jsx("p",{className:"text-base text-gray-600 mb-4",children:"Intelligent recommendations and predictive analytics"}),e.jsx(M,{onClick:()=>a("customer-insights"),children:"Explore Insights"})]})})]}),!d&&(s==null?void 0:s.summary)&&s.summary.total_sessions>0&&e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:space-x-8 p-6 bg-gradient-to-r from-green-50 via-emerald-50 to-green-50 rounded-2xl border border-green-200 shadow-sm w-full max-w-4xl space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(Y,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-lg font-bold text-green-900",children:["Excellence Score: ",m(),"%"]}),e.jsxs("div",{className:"text-sm text-green-700",children:[m()>=80?"Exceeding":m()>=60?"Meeting":"Below"," industry benchmarks"]})]})]}),e.jsx("div",{className:"hidden lg:block h-12 w-px bg-green-200"}),e.jsxs("div",{className:"grid grid-cols-3 gap-6 text-center w-full max-w-md",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold text-green-900",children:s.summary.total_responses.toLocaleString()}),e.jsx("div",{className:"text-sm text-green-700",children:"Total Responses"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-xl font-bold text-green-900",children:[s.summary.overall_completion_rate,"%"]}),e.jsx("div",{className:"text-sm text-green-700",children:"Success Rate"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-xl font-bold text-green-900",children:[s.summary.user_satisfaction_rate,"%"]}),e.jsx("div",{className:"text-sm text-green-700",children:"Satisfaction"})]})]})]})})]})})},Gs=({onTabChange:t,stats:a={pending_invitations:0,unread_responses:0,active_sessions:0,completion_rate:0},className:s})=>{const[d,x]=N.useState(""),o=[{id:"invite-members",title:"Invite Team Members",description:"Add new people to your organization",icon:J,onClick:()=>t("members"),badge:a.pending_invitations>0?`${a.pending_invitations} pending`:void 0,category:"primary",shortcut:"⌘I",estimatedTime:"2 min"},{id:"create-question",title:"Create Survey Question",description:"Add new feedback questions",icon:Z,onClick:()=>t("questions"),category:"primary",shortcut:"⌘Q",estimatedTime:"3 min"},{id:"view-responses",title:"Review Feedback",description:"Check latest customer responses",icon:Cs,onClick:()=>t("feedback"),badge:a.unread_responses>0?`${a.unread_responses} new`:void 0,category:"primary",shortcut:"⌘F",estimatedTime:"5 min"},{id:"export-data",title:"Export Analytics",description:"Download performance reports",icon:Fe,onClick:()=>console.log("Export data"),category:"secondary",estimatedTime:"1 min"},{id:"system-settings",title:"System Settings",description:"Configure organization preferences",icon:ls,onClick:()=>t("settings"),category:"secondary",estimatedTime:"10 min"},{id:"performance-review",title:"Performance Dashboard",description:"View detailed system metrics",icon:E,onClick:()=>t("performance"),category:"secondary",estimatedTime:"5 min"},{id:"optimize-completion",title:"Optimize Completion Rate",description:`Current rate: ${a.completion_rate}% - Get suggestions`,icon:K,onClick:()=>t("customer-insights"),category:"suggestion",estimatedTime:"15 min"},{id:"analyze-trends",title:"Analyze Response Trends",description:"AI-powered insights from recent feedback",icon:T,onClick:()=>t("sentiment"),category:"suggestion",estimatedTime:"8 min"}].filter(r=>r.title.toLowerCase().includes(d.toLowerCase())||r.description.toLowerCase().includes(d.toLowerCase())),c=o.filter(r=>r.category==="primary"),m=o.filter(r=>r.category==="secondary"),n=o.filter(r=>r.category==="suggestion"),g=r=>{switch(r){case"primary":return"border-orange-200 hover:border-orange-300 hover:shadow-lg bg-gradient-to-br from-orange-50/50 to-amber-50/30";case"suggestion":return"border-blue-200 hover:border-blue-300 hover:shadow-lg bg-gradient-to-br from-blue-50/50 to-indigo-50/30";default:return"border-gray-200 hover:border-gray-300 hover:shadow-md bg-white"}},i=({action:r})=>e.jsx(j,{className:S("group cursor-pointer transition-all duration-200 hover:-translate-y-1",g(r.category),"border-2"),onClick:r.onClick,children:e.jsxs(v,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-white shadow-sm ring-1 ring-black/5",children:e.jsx(r.icon,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[r.badge&&e.jsx(R,{variant:"secondary",className:"text-xs font-medium",children:r.badge}),r.category==="suggestion"&&e.jsxs(R,{className:"bg-blue-100 text-blue-700 text-xs",children:[e.jsx(fe,{className:"w-3 h-3 mr-1"}),"Smart"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 group-hover:text-orange-700 transition-colors",children:r.title}),e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:r.description})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-3 text-xs text-gray-500",children:[r.estimatedTime&&e.jsx("span",{className:"flex items-center space-x-1",children:e.jsxs("span",{children:["~",r.estimatedTime]})}),r.shortcut&&e.jsx("kbd",{className:"hidden sm:inline-flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium text-muted-foreground",children:r.shortcut})]}),e.jsx(os,{className:"w-4 h-4 text-gray-400 group-hover:text-orange-500 transition-colors"})]})]})});return e.jsxs(j,{className:S("border-0 shadow-lg bg-gradient-to-br from-white via-orange-50/20 to-amber-50/10",s),children:[e.jsxs(f,{className:"pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-orange-500 rounded-lg shadow-lg",children:e.jsx(Y,{className:"w-5 h-5 text-white"})}),e.jsx(b,{className:"text-xl font-bold text-gray-900",children:"Quick Actions"})]}),e.jsxs(R,{variant:"outline",className:"text-orange-700 border-orange-200 bg-orange-50",children:[o.length," available"]})]}),e.jsxs("div",{className:"relative mt-4",children:[e.jsx(_e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(cs,{placeholder:"Search actions...",value:d,onChange:r=>x(r.target.value),className:"pl-10 bg-white/70 border-gray-200 focus:border-orange-300 focus:ring-orange-200"})]})]}),e.jsxs(v,{className:"space-y-6",children:[c.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase tracking-wider flex items-center space-x-2",children:[e.jsx(K,{className:"w-4 h-4 text-orange-600"}),e.jsx("span",{children:"Priority Tasks"})]}),e.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:c.map(r=>e.jsx(i,{action:r},r.id))})]}),m.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase tracking-wider flex items-center space-x-2",children:[e.jsx(Ts,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{children:"Management"})]}),e.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:m.map(r=>e.jsx(i,{action:r},r.id))})]}),n.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase tracking-wider flex items-center space-x-2",children:[e.jsx(fe,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{children:"Smart Suggestions"})]}),e.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:n.map(r=>e.jsx(i,{action:r},r.id))})]}),o.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(_e,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsxs("p",{children:['No actions found matching "',d,'"']})]})]})]})},Te=({organizationId:t,onTabChange:a=()=>{}})=>{const{data:s,isLoading:d,error:x,refetch:l}=Ls(t);return x?e.jsx(Xe,{onRetry:()=>l()}):e.jsx(Ge,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsx(Hs,{organizationId:t,onTabChange:a}),e.jsx(Gs,{onTabChange:a,stats:{pending_invitations:2,unread_responses:s!=null&&s.total_responses?Math.round(s.total_responses*.12):0,active_sessions:(s==null?void 0:s.total_sessions)||0,completion_rate:s&&s.total_sessions>0?Math.round(s.completed_sessions/s.total_sessions*100):0}})]})})},Xs=({questionId:t,questionText:a,questionType:s,responses:d,completionRate:x})=>{const[l,o]=N.useState(!1),{data:c}=H({queryKey:["question-responses",t],queryFn:async()=>{const{data:r}=await P.from("feedback_responses").select("id, response_value, created_at, question_category").eq("question_id",t).order("created_at",{ascending:!1}).limit(10);return r||[]},enabled:l}),m=()=>{if(!c||c.length===0)return[];const r={};return c.forEach(h=>{const p=String(h.response_value||"No Response");r[p]=(r[p]||0)+1}),Object.entries(r).map(([h,p])=>({value:h,count:p,percentage:p/c.length*100}))},n=r=>{switch(r.toLowerCase()){case"star rating":case"nps score":return e.jsx(T,{className:"w-4 h-4 text-green-600"});case"text input":return e.jsx(Ve,{className:"w-4 h-4 text-gray-600"});default:return e.jsx(T,{className:"w-4 h-4 text-blue-600"})}},g=(r,h)=>{if(r==null)return"No Response";switch(h.toLowerCase()){case"star rating":return`${r} stars`;case"nps score":return`${r}/10`;case"single choice":case"multiple choice":return Array.isArray(r)?r.join(", "):String(r);case"slider":return`${r}`;default:return String(r)}},i=m();return e.jsxs(j,{className:"mb-4",children:[e.jsx(f,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(b,{className:"text-lg",children:a}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[e.jsx(R,{variant:"outline",children:s}),e.jsxs("span",{className:"text-sm text-gray-600",children:[d.length," responses"]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[x,"% completion"]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[n(s),e.jsx("span",{className:"text-sm text-gray-600",children:"Active"})]})]})]}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>o(!l),children:l?e.jsx(ds,{className:"w-4 h-4"}):e.jsx(xs,{className:"w-4 h-4"})})]})}),l&&e.jsx(v,{children:e.jsxs("div",{className:"space-y-6",children:[i.length>0&&["single choice","multiple choice","star rating","emoji rating"].includes(s.toLowerCase())&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-3 flex items-center",children:[e.jsx(Rs,{className:"w-4 h-4 mr-2"}),"Response Distribution"]}),e.jsxs("div",{className:"space-y-3",children:[i.slice(0,5).map((r,h)=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"font-medium truncate",children:r.value}),e.jsxs("span",{children:[r.count," (",Math.round(r.percentage),"%)"]})]}),e.jsx(G,{value:r.percentage,className:"h-2"})]},h)),i.length>5&&e.jsxs("p",{className:"text-sm text-gray-500",children:["... and ",i.length-5," more responses"]})]})]}),s.toLowerCase()==="text input"&&c&&c.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-3 flex items-center",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Response Analysis"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"font-medium text-blue-900",children:"Total Responses"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:c.length})]}),e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"font-medium text-green-900",children:"Response Rate"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[x,"%"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Recent Responses"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:c&&c.length>0?c.slice(0,5).map((r,h)=>e.jsxs("div",{className:"p-2 bg-gray-50 rounded text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-gray-900",children:g(r.response_value,s)}),e.jsx("span",{className:"text-gray-500 text-xs",children:new Date(r.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"text-gray-600 text-xs mt-1",children:["Category: ",r.question_category]})]},h)):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No responses yet"})})]})]})})]})},Pe=({questions:t,categories:a,summary:s,showDrillDown:d=!1})=>{const[x,l]=N.useState(null);console.log("AnalyticsTable - Rendering with data:",{questionsCount:t==null?void 0:t.length,categoriesCount:a==null?void 0:a.length,summary:s,showDrillDown:d});const o=n=>{switch(n){case"positive":return e.jsx($,{className:"w-4 h-4 text-green-600"});case"negative":return e.jsx(I,{className:"w-4 h-4 text-red-600"});case"mixed":return e.jsx(T,{className:"w-4 h-4 text-yellow-600"});default:return e.jsx(T,{className:"w-4 h-4 text-gray-600"})}},c=n=>{switch(n){case"positive":return"text-green-600 bg-green-50";case"negative":return"text-red-600 bg-red-50";case"mixed":return"text-yellow-600 bg-yellow-50";default:return"text-gray-600 bg-gray-50"}},m=n=>{switch(n){case"positive":return"Positive";case"negative":return"Needs Attention";case"mixed":return"Mixed Results";default:return"Neutral"}};return!t&&!a?e.jsxs(j,{children:[e.jsx(f,{children:e.jsxs(b,{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"w-5 h-5"}),e.jsx("span",{children:"Analytics Dashboard"})]})}),e.jsx(v,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(E,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-gray-500",children:"No analytics data available yet"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Data will appear here once feedback is collected"})]})})]}):e.jsxs(j,{children:[e.jsx(f,{children:e.jsxs(b,{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"w-5 h-5"}),e.jsx("span",{children:"Analytics Dashboard"})]})}),e.jsx(v,{children:e.jsxs(Ee,{defaultValue:"questions",className:"space-y-4",children:[e.jsxs($e,{children:[e.jsxs(V,{value:"questions",className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"w-4 h-4"}),e.jsxs("span",{children:["Questions (",(t==null?void 0:t.length)||0,")"]})]}),e.jsxs(V,{value:"categories",children:["Categories (",(a==null?void 0:a.length)||0,")"]})]}),e.jsx(O,{value:"questions",children:e.jsx("div",{className:"space-y-4",children:t&&t.length>0?e.jsxs(be,{children:[e.jsx(ye,{children:e.jsxs(F,{children:[e.jsx(C,{children:"Question"}),e.jsx(C,{children:"Type"}),e.jsx(C,{children:"Category"}),e.jsx(C,{children:"Responses"}),e.jsx(C,{children:"Completion Rate"}),e.jsx(C,{children:"Trend"}),e.jsx(C,{children:"Key Insights"}),d&&e.jsx(C,{children:"Actions"})]})}),e.jsx(Ne,{children:t.map(n=>{var g,i;return e.jsxs(W.Fragment,{children:[e.jsxs(F,{children:[e.jsx(w,{className:"font-medium max-w-xs truncate",children:n.question_text}),e.jsx(w,{children:e.jsx(R,{variant:"outline",children:n.question_type})}),e.jsx(w,{children:n.category}),e.jsx(w,{children:n.total_responses}),e.jsxs(w,{children:[n.completion_rate,"%"]}),e.jsx(w,{children:e.jsxs("div",{className:`flex items-center space-x-2 px-2 py-1 rounded-md ${c(n.trend)}`,children:[o(n.trend),e.jsx("span",{className:"font-medium",children:m(n.trend)})]})}),e.jsx(w,{className:"max-w-xs",children:e.jsx("div",{className:"text-sm",children:((g=n.insights)==null?void 0:g.slice(0,2).map((r,h)=>e.jsx("div",{className:"truncate",children:r},h)))||e.jsx("span",{className:"text-gray-400",children:"No insights"})})}),d&&e.jsx(w,{children:e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>l(x===n.id?null:n.id),children:e.jsx(ms,{className:`w-4 h-4 transition-transform ${x===n.id?"rotate-90":""}`})})})]}),d&&x===n.id&&e.jsx(F,{children:e.jsx(w,{colSpan:8,className:"p-0",children:e.jsxs("div",{className:"p-4 bg-gray-50",children:[e.jsx(Xs,{questionId:n.id,questionText:n.question_text,questionType:n.question_type,responses:[],avgScore:0,completionRate:n.completion_rate}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(j,{children:[e.jsx(f,{className:"pb-2",children:e.jsx(b,{className:"text-sm",children:"Response Insights"})}),e.jsx(v,{children:e.jsx("ul",{className:"text-sm space-y-1",children:((i=n.insights)==null?void 0:i.map((r,h)=>e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-blue-500 mt-1",children:"•"}),e.jsx("span",{children:r})]},h)))||e.jsx("li",{className:"text-gray-400",children:"No insights available"})})})]}),e.jsxs(j,{children:[e.jsx(f,{className:"pb-2",children:e.jsx(b,{className:"text-sm",children:"Response Distribution"})}),e.jsx(v,{children:e.jsx("div",{className:"text-sm space-y-1",children:n.response_distribution&&Object.entries(n.response_distribution).length>0?Object.entries(n.response_distribution).slice(0,3).map(([r,h],p)=>e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"truncate",children:r}),e.jsx("span",{className:"font-medium",children:h})]},p)):e.jsx("div",{className:"text-gray-400",children:"No responses yet"})})})]})]})]})})})]},n.id)})})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Se,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-gray-500",children:"No questions found"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Questions will appear here once they are created"})]})})}),e.jsx(O,{value:"categories",children:a&&a.length>0?e.jsxs(be,{children:[e.jsx(ye,{children:e.jsxs(F,{children:[e.jsx(C,{children:"Category"}),e.jsx(C,{children:"Questions"}),e.jsx(C,{children:"Total Responses"}),e.jsx(C,{children:"Completion Rate"})]})}),e.jsx(Ne,{children:a.map((n,g)=>e.jsxs(F,{children:[e.jsx(w,{className:"font-medium",children:n.category}),e.jsx(w,{children:n.total_questions}),e.jsx(w,{children:n.total_responses}),e.jsxs(w,{children:[n.completion_rate,"%"]})]},g))})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(E,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-gray-500",children:"No categories found"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Categories will appear here once questions are categorized"})]})})]})})]})},Ws=({stats:t,isLoading:a=!1})=>{var d,x;if(console.log("AnalyticsInsights - Rendering with stats:",t),a)return e.jsxs(j,{children:[e.jsx(f,{children:e.jsx(b,{children:"Analytics Insights"})}),e.jsx(v,{children:e.jsx("div",{className:"space-y-4",children:[1,2,3].map(l=>e.jsx("div",{className:"h-16 bg-gray-100 rounded animate-pulse"},l))})})]});if(!t)return e.jsxs(j,{children:[e.jsx(f,{children:e.jsx(b,{children:"Analytics Insights"})}),e.jsx(v,{children:e.jsxs(Ie,{children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(ze,{children:"Analytics insights will appear here once data is available."})]})})]});const s=[{title:"Response Rate",value:t.total_sessions>0?`${Math.round(t.completed_sessions/t.total_sessions*100)}%`:"0%",trend:((d=t.growth_metrics)==null?void 0:d.growth_rate)||0,isPositive:(((x=t.growth_metrics)==null?void 0:x.growth_rate)||0)>=0,icon:Z,description:"Session completion rate this month"},{title:"User Engagement",value:t.active_members||0,trend:8,isPositive:!0,icon:J,description:"Active members this month"},{title:"Response Quality",value:t.total_questions>0?`${Math.round(t.total_responses/t.total_questions*100)}%`:"0%",trend:5,isPositive:!0,icon:$,description:"Average responses per question"}];return e.jsxs(j,{children:[e.jsx(f,{children:e.jsx(b,{children:"Analytics Insights"})}),e.jsx(v,{children:e.jsx("div",{className:"space-y-4",children:s.map((l,o)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-full ${l.isPositive?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:e.jsx(l.icon,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:l.title}),e.jsx("p",{className:"text-sm text-gray-600",children:l.description})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-2xl font-bold",children:l.value}),e.jsxs(R,{variant:l.isPositive?"default":"destructive",className:"flex items-center space-x-1",children:[l.isPositive?e.jsx(T,{className:"w-3 h-3"}):e.jsx(D,{className:"w-3 h-3"}),e.jsxs("span",{children:[Math.abs(l.trend),"%"]})]})]})]},o))})})]})},Ys=t=>{const[a,s]=N.useState({activeUsers:0,feedbackSubmissions:0,averageScore:0,responseTime:0}),[d,x]=N.useState(!0),l=async()=>{try{const o=new Date(Date.now()-6e5).toISOString(),{data:c}=await P.from("feedback_sessions").select("id").eq("organization_id",t).gte("started_at",o),{data:m}=await P.from("feedback_responses").select("id, score").eq("organization_id",t).gte("created_at",o),{data:n}=await P.from("feedback_sessions").select("started_at, completed_at").eq("organization_id",t).eq("status","completed").not("completed_at","is",null).order("completed_at",{ascending:!1}).limit(50);let g=0;n&&n.length>0&&(g=n.reduce((h,p)=>{const y=new Date(p.started_at).getTime(),_=new Date(p.completed_at).getTime();return h+(_-y)},0)/n.length/(1e3*60));let i=0;if(m&&m.length>0){const r=m.filter(h=>h.score!==null);r.length>0&&(i=r.reduce((h,p)=>h+p.score,0)/r.length)}s({activeUsers:(c==null?void 0:c.length)||0,feedbackSubmissions:(m==null?void 0:m.length)||0,averageScore:Math.round(i*10)/10,responseTime:Math.round(g*10)/10})}catch(o){console.error("Error fetching real-time analytics:",o)}finally{x(!1)}};return N.useEffect(()=>{if(!t)return;l();const o=setInterval(l,3e4);return()=>clearInterval(o)},[t]),{liveData:a,isLoading:d,refetch:l}},Zs=({organizationId:t})=>{const{liveData:a,isLoading:s}=Ys(t);return s?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-pulse",children:[e.jsx("div",{className:"h-32 bg-gray-200 rounded"}),e.jsx("div",{className:"h-32 bg-gray-200 rounded"})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(j,{children:[e.jsx(f,{children:e.jsx(b,{children:"Feedback Submissions (Last 10 min)"})}),e.jsx(v,{children:e.jsx("div",{className:"text-4xl font-bold",children:a.feedbackSubmissions})})]}),e.jsxs(j,{children:[e.jsx(f,{children:e.jsx(b,{children:"Response Time (min)"})}),e.jsx(v,{children:e.jsx("div",{className:"text-4xl font-bold",children:a.responseTime})})]})]})},Js=t=>H({queryKey:["executive-analytics",t],queryFn:async()=>{const a=new Date;a.setDate(1);const s=new Date(a);s.setMonth(s.getMonth()-1);const{data:d}=await P.from("feedback_sessions").select("total_score").eq("organization_id",t).not("total_score","is",null),x=d&&d.length>0?d.reduce((i,r)=>i+r.total_score,0)/d.length/5*5:0,{data:l}=await P.from("feedback_sessions").select("id, status").eq("organization_id",t),o=(l==null?void 0:l.filter(i=>i.status==="completed").length)||0,c=l&&l.length>0?o/l.length*100:0,{data:m}=await P.from("feedback_sessions").select("started_at, completed_at").eq("organization_id",t).eq("status","completed").not("completed_at","is",null);let n=0;m&&m.length>0&&(n=m.reduce((r,h)=>{const p=new Date(h.started_at).getTime(),y=new Date(h.completed_at).getTime();return r+(y-p)},0)/m.length/(1e3*60*60*24));const g=l&&l.length>0?Math.max(.5,2-l.length/100):1;return[{title:"Customer Satisfaction",value:Math.round(x*10)/10,target:4.5,trend:"+5%",isPositive:!0,suffix:"/5"},{title:"Response Rate",value:Math.round(c),target:90,trend:"+12%",isPositive:!0,suffix:"%"},{title:"Issue Resolution Time",value:Math.round(n*10)/10,target:2,trend:"-8%",isPositive:!0,suffix:" days"},{title:"Cost per Feedback",value:Math.round(g*100)/100,target:1,trend:"-15%",isPositive:!0,prefix:"$"}]},enabled:!!t,staleTime:5*60*1e3}),Ds=({organizationId:t})=>{const{data:a,isLoading:s,error:d}=Js(t);if(d)return e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(I,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Error Loading Executive Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Unable to load executive analytics data. Please try again."})]});if(s)return e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(l=>e.jsx("div",{className:"h-32 bg-gray-200 rounded animate-pulse"},l))})});const x=(a==null?void 0:a.filter(l=>l.title!=="Cost per Feedback"))||[];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:x.map((l,o)=>e.jsxs(j,{className:"border-l-4 border-l-blue-500",children:[e.jsx(f,{className:"pb-2",children:e.jsx(b,{className:"text-sm font-medium text-gray-600",children:l.title})}),e.jsx(v,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[l.prefix,l.value,l.suffix]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Target: ",l.prefix,l.target,l.suffix]})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsxs(R,{variant:l.isPositive?"default":"secondary",className:"mb-2",children:[l.isPositive?e.jsx(T,{className:"w-3 h-3 mr-1"}):e.jsx(D,{className:"w-3 h-3 mr-1"}),l.trend]}),l.title==="Customer Satisfaction"&&e.jsx(K,{className:"w-5 h-5 text-blue-600"}),l.title==="Response Rate"&&e.jsx(J,{className:"w-5 h-5 text-green-600"}),l.title==="Issue Resolution Time"&&e.jsx($,{className:"w-5 h-5 text-orange-600"})]})]})})]},o))}),e.jsxs(j,{children:[e.jsx(f,{children:e.jsx(b,{children:"Critical Insights & Alerts"})}),e.jsx(v,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"font-medium text-green-900",children:"Performance Above Target"})]}),e.jsx("p",{className:"text-sm text-green-700 mt-1",children:"Customer satisfaction is consistently above 4.0/5 target"})]}),e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"font-medium text-blue-900",children:"Positive Trend"})]}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Response rates have improved by 12% this month"})]})]})})]}),e.jsxs(j,{children:[e.jsx(f,{children:e.jsx(b,{children:"Data-Driven Recommendations"})}),e.jsx(v,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 border-l-4 border-l-blue-500 bg-blue-50",children:[e.jsx("h4",{className:"font-medium",children:"Optimize Response Collection"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Consider implementing automated follow-ups to maintain high response rates"})]}),e.jsxs("div",{className:"p-3 border-l-4 border-l-green-500 bg-green-50",children:[e.jsx("h4",{className:"font-medium",children:"Leverage High Satisfaction Areas"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Replicate successful practices from high-performing categories"})]})]})})]})]})},et=t=>H({queryKey:["enhanced-organization-stats",t],queryFn:async()=>{const{data:a,error:s}=await P.rpc("get_organization_stats_enhanced",{org_id:t});if(s)throw s;return a},enabled:!!t,staleTime:3e4,refetchInterval:6e4}),st=({data:t,isLoading:a})=>a?e.jsxs(j,{children:[e.jsxs(f,{children:[e.jsx("div",{className:"h-6 w-1/3 rounded bg-gray-200 animate-pulse mb-2"}),e.jsx("div",{className:"h-4 w-1/2 rounded bg-gray-200 animate-pulse"})]}),e.jsx(v,{children:e.jsx("div",{className:"h-80 rounded bg-gray-200 animate-pulse"})})]}):!t||t.length===0?e.jsxs(j,{children:[e.jsxs(f,{children:[e.jsx(b,{children:"Trend Analysis"}),e.jsx(we,{children:"Key metrics over the selected period."})]}),e.jsx(v,{children:e.jsxs("div",{className:"h-80 flex flex-col items-center justify-center text-center text-gray-500",children:[e.jsx(Ms,{className:"w-12 h-12 mb-4"}),e.jsx("p",{className:"font-semibold",children:"No Trend Data Available"}),e.jsx("p",{className:"text-sm",children:"Try selecting a different date range to see trend analysis."})]})})]}):e.jsxs(j,{children:[e.jsxs(f,{children:[e.jsx(b,{children:"Trend Analysis"}),e.jsx(we,{children:"Key metrics over the selected period."})]}),e.jsx(v,{children:e.jsx("div",{className:"h-80 -ml-4",children:e.jsx(fs,{width:"100%",height:"100%",children:e.jsxs(bs,{data:t,margin:{top:5,right:30,left:0,bottom:5},children:[e.jsx(ys,{strokeDasharray:"3 3"}),e.jsx(Ns,{dataKey:"date"}),e.jsx(ws,{domain:[0,100],unit:"%"}),e.jsx(_s,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"var(--radius)"}}),e.jsx(ks,{}),e.jsx(ke,{type:"monotone",dataKey:"completion_rate",name:"Completion Rate",stroke:"hsl(var(--primary))",strokeWidth:2,dot:{r:4},activeDot:{r:8}}),e.jsx(ke,{type:"monotone",dataKey:"avg_score",name:"Average Score",stroke:"hsl(var(--destructive))",strokeWidth:2,dot:{r:4},activeDot:{r:8}})]})})})})]}),tt=({organizationId:t,organizationName:a,activeTab:s,stats:d,isLiveActivity:x,setIsLiveActivity:l,handleQuickActions:o})=>{const{data:c,isLoading:m,error:n}=qe(t),{data:g,isLoading:i,error:r}=et(t);if(m&&i)return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[1,2,3,4].map(_=>e.jsx("div",{className:"h-32 bg-gray-200 rounded animate-pulse"},_))}),e.jsx("div",{className:"h-64 bg-gray-200 rounded animate-pulse"})]});const p={...(c==null?void 0:c.summary)||{total_questions:0,total_responses:0,overall_completion_rate:0},overall_avg_score:(g==null?void 0:g.avg_session_score)||0},y=n||r?e.jsxs(Ie,{variant:"destructive",className:"mb-4",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(hs,{children:"Error"}),e.jsxs(ze,{children:["Some dashboard data may be unavailable. ",(n==null?void 0:n.message)||(r==null?void 0:r.message)]})]}):null;return s==="overview"?e.jsxs("div",{className:"space-y-6",children:[y,e.jsx(Te,{organizationId:t}),e.jsx(st,{data:(c==null?void 0:c.trendData)||[],isLoading:m}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Pe,{questions:(c==null?void 0:c.questions)||[],categories:(c==null?void 0:c.categories)||[],summary:p}),e.jsx(Ws,{stats:g,isLoading:i})]})]}):s==="executive"?e.jsxs("div",{className:"space-y-6",children:[y,e.jsx(Ds,{organizationId:t})]}):s==="realtime"?e.jsxs("div",{className:"space-y-6",children:[y,e.jsx(Zs,{organizationId:t})]}):s==="detailed"?e.jsxs("div",{className:"space-y-6",children:[y,e.jsx(Pe,{questions:(c==null?void 0:c.questions)||[],categories:(c==null?void 0:c.categories)||[],summary:p,showDrillDown:!0})]}):e.jsxs(e.Fragment,{children:[y,e.jsx(Te,{organizationId:t})]})},mt=({organization:t,stats:a,activeTab:s,setActiveTab:d,isLiveActivity:x,setIsLiveActivity:l,handleQuickActions:o})=>e.jsx(us,{permission:"view_analytics",organizationId:t.id,showRequiredRole:!0,fallback:e.jsxs("div",{className:"text-center p-8",children:[e.jsx("p",{className:"text-gray-500",children:"You need viewer-level access or higher to view analytics."}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Contact your organization administrator for access."})]}),children:e.jsx(tt,{organizationId:t.id,organizationName:t.name,activeTab:s,onTabChange:d,stats:a,isLiveActivity:x,setIsLiveActivity:l,handleQuickActions:o})});export{mt as AdvancedDashboardTab,mt as default};
