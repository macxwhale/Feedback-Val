import{c as g,aY as N,p as S,A as T,j as e,C as c,l as d,i as x,k as b,q as f,T as A,m as M,t as R,v as $,w as u,x as y}from"./index-BIt5b66a.js";import{u as B}from"./useAnalyticsTableData-FY8YwjB7.js";import{T as q}from"./trending-down-C8UamHsj.js";import{P as D}from"./PermissionGuard-Dz_iv-9x.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=g("Frown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=g("Meh",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"8",x2:"16",y1:"15",y2:"15",key:"1xb1d9"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=g("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),O=({sentimentStats:s,totalQuestions:t,overallScore:l})=>{const a=s.positive>s.negative?"positive":s.negative>s.positive?"negative":"neutral",r=[{title:"Overall Sentiment",value:a,count:t,icon:N,color:a==="positive"?"text-green-600":a==="negative"?"text-red-600":"text-yellow-600",bgColor:a==="positive"?"bg-green-50":a==="negative"?"bg-red-50":"bg-yellow-50",description:"Dominant sentiment across all questions"},{title:"Positive Responses",value:s.positive,percentage:Math.round(s.positive/t*100),icon:S,color:"text-green-600",bgColor:"bg-green-50",description:"Questions with positive feedback trends"},{title:"Negative Responses",value:s.negative,percentage:Math.round(s.negative/t*100),icon:q,color:"text-red-600",bgColor:"bg-red-50",description:"Questions requiring attention"},{title:"Neutral Responses",value:s.neutral,percentage:Math.round(s.neutral/t*100),icon:T,color:"text-gray-600",bgColor:"bg-gray-50",description:"Balanced or mixed sentiment"}];return e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:r.map((i,o)=>e.jsx(c,{className:"hover:shadow-md transition-shadow duration-200",children:e.jsxs(d,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${i.bgColor}`,children:e.jsx(i.icon,{className:`w-4 h-4 ${i.color}`})}),i.percentage!==void 0&&e.jsxs(x,{variant:"outline",className:"text-xs",children:[i.percentage,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:i.title}),e.jsx("div",{className:`text-2xl font-bold mb-1 ${i.color}`,children:(typeof i.value=="string",i.value)}),e.jsx("p",{className:"text-xs text-gray-500",children:i.description})]})]})},o))})},w=({sentiment:s,className:t="w-4 h-4"})=>{switch(s){case"positive":return e.jsx(Q,{className:`${t} text-green-600`});case"negative":return e.jsx(L,{className:`${t} text-red-600`});case"neutral":return e.jsx(j,{className:`${t} text-yellow-600`});default:return e.jsx(j,{className:`${t} text-gray-600`})}},v=s=>{switch(s){case"positive":return"bg-green-100 text-green-800 border-green-200";case"negative":return"bg-red-100 text-red-800 border-red-200";case"neutral":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},P=s=>{const t=s.filter(r=>r.sentiment==="positive").length,l=s.filter(r=>r.sentiment==="negative").length,a=s.filter(r=>r.sentiment==="neutral").length;return{positive:t,negative:l,neutral:a}},F=s=>s.positive>s.negative&&s.positive>s.neutral?"positive":s.negative>s.positive&&s.negative>s.neutral?"negative":"neutral",Y=({questionSentiments:s})=>e.jsxs(c,{children:[e.jsx(b,{children:e.jsx(f,{children:"Question Sentiment Analysis"})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:s.map((t,l)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(w,{sentiment:t.sentiment}),e.jsx(x,{className:v(t.sentiment),children:t.sentiment})]}),e.jsx("h4",{className:"font-medium text-sm",children:t.question_text}),e.jsxs("p",{className:"text-xs text-gray-600",children:[t.total_responses," responses • ",t.completion_rate,"% completion"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold",children:[t.completion_rate,"%"]}),t.sentiment==="negative"&&e.jsx(A,{className:"w-4 h-4 text-red-500 ml-auto mt-1"}),t.sentiment==="positive"&&e.jsx(M,{className:"w-4 h-4 text-green-500 ml-auto mt-1"})]})]},l))})})]}),E=({categorySentiments:s})=>e.jsxs(c,{children:[e.jsx(b,{children:e.jsx(f,{children:"Category Sentiment Analysis"})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:s.map((t,l)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(w,{sentiment:t.sentiment}),e.jsx(x,{className:v(t.sentiment),children:t.sentiment})]}),e.jsx("h4",{className:"font-medium",children:t.category}),e.jsxs("p",{className:"text-sm text-gray-600",children:[t.total_questions," questions • ",t.total_responses," responses"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xl font-bold",children:t.total_responses}),e.jsx("div",{className:"text-sm text-gray-500",children:"responses"})]})]},l))})})]}),G=({organizationId:s})=>{const{data:t,isLoading:l}=B(s);if(l)return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[1,2,3].map(n=>e.jsx("div",{className:"h-32 bg-gray-200 rounded"},n))})]})});if(!t)return e.jsx(c,{children:e.jsxs(d,{className:"p-6 text-center",children:[e.jsx(N,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-gray-500",children:"No sentiment data available"})]})});const a=t.questions.map(n=>{const m=n.trend==="positive"?"positive":n.trend==="negative"?"negative":"neutral";return{...n,sentiment:m}}),r=P(a),i=a.length,o=F(r),C=t.categories.map(n=>{const m=n.questions.filter(k=>k.trend==="positive").length,p=n.questions.length,h=p>0?m/p:0,_=h>.6?"positive":h<.3?"negative":"neutral";return{...n,sentiment:_}});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Sentiment Analysis"}),e.jsxs(x,{className:v(o),children:["Overall: ",o]})]}),e.jsx(O,{sentimentStats:r,totalQuestions:i,overallScore:0}),e.jsxs(R,{defaultValue:"questions",className:"w-full",children:[e.jsxs($,{className:"grid grid-cols-2 w-full max-w-md",children:[e.jsx(u,{value:"questions",children:"By Question"}),e.jsx(u,{value:"categories",children:"By Category"})]}),e.jsx(y,{value:"questions",className:"space-y-4",children:e.jsx(Y,{questionSentiments:a.map(n=>({question_text:n.question_text,sentiment:n.sentiment,total_responses:n.total_responses,completion_rate:n.completion_rate}))})}),e.jsx(y,{value:"categories",className:"space-y-4",children:e.jsx(E,{categorySentiments:C.map(n=>({category:n.category,sentiment:n.sentiment,total_questions:n.total_questions,total_responses:n.total_responses}))})})]})]})},z=({organizationId:s})=>e.jsx(D,{permission:"view_analytics",organizationId:s,showRequiredRole:!0,fallback:e.jsxs("div",{className:"text-center p-8",children:[e.jsx("p",{className:"text-gray-500",children:"You need viewer-level access or higher to view sentiment analysis."}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Contact your organization administrator for access."})]}),children:e.jsx(G,{organizationId:s})});export{z as SentimentTab,z as default};
