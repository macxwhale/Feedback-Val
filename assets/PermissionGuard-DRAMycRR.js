import{H as C,j as e,ag as y,C as m,d as o,p as d,T as x,g,b3 as h,b4 as R,e as j}from"./index-B3l-sWJh.js";const w=({children:a,permission:s,organizationId:t,fallback:c,showRequiredRole:u=!0})=>{const{hasPermission:p,userRole:i,isLoading:f,isAdmin:N,error:l}=C(t);if(f)return e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Checking permissions..."})]})});if(l)return console.error("Permission guard error:",l),e.jsxs(m,{className:"border-amber-200",children:[e.jsx(o,{children:e.jsxs(d,{className:"flex items-center text-amber-600",children:[e.jsx(x,{className:"w-5 h-5 mr-2"}),"Permission Check Failed"]})}),e.jsx(g,{children:e.jsx("p",{className:"text-sm text-gray-600",children:"Unable to verify permissions. Please refresh the page or contact support if the issue persists."})})]});if(N)return console.log("Permission granted via system admin privileges"),e.jsx(e.Fragment,{children:a});if(p(s))return console.log("Permission granted:",s),e.jsx(e.Fragment,{children:a});if(console.log("Permission denied:",{permission:s,userRole:i,organizationId:t}),c)return e.jsx(e.Fragment,{children:c});const v=b(s),n=h(v),r=i?h(i):null;return e.jsxs(m,{className:"border-red-200",children:[e.jsx(o,{children:e.jsxs(d,{className:"flex items-center text-red-600",children:[e.jsx(R,{className:"w-5 h-5 mr-2"}),"Access Restricted"]})}),e.jsxs(g,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(x,{className:"w-4 h-4 text-amber-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"You don't have permission to access this feature."})]}),u&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Required role:"}),e.jsxs(j,{variant:n.variant,className:"flex items-center gap-1",children:[e.jsx(n.icon,{className:"w-3 h-3"}),n.label]})]}),r&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Your role:"}),e.jsxs(j,{variant:r.variant,className:"flex items-center gap-1",children:[e.jsx(r.icon,{className:"w-3 h-3"}),r.label]})]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Contact your organization administrator to request access."})]})]})};function b(a){return{view_analytics:"viewer",export_data:"analyst",manage_questions:"analyst",manage_users:"manager",manage_integrations:"admin",manage_organization:"admin",manage_billing:"owner"}[a]||"admin"}export{w as P};
