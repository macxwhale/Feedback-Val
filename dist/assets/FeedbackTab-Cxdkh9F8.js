import{r as u,j as e,P as n,y as g,C as l,l as r,Q as S,o as A,V as _,B as N,M,A as D,F as f,W as E,X as L,Y as P,_ as z,$ as B,a0 as F,a1 as d,t as V,v as q,w as o,i as x,x as h,k as i,q as c,z as v,a2 as j,p as O,U}from"./index-CI5pWOu5.js";import{u as I,D as $,a as G,A as H}from"./useOrganizationStats-RRzjP7x9.js";import{P as K}from"./PermissionGuard-DaS66s0B.js";const Q=({organizationId:t})=>{const{data:s,isLoading:b,error:p,refetch:y}=I(t),[w,C]=u.useState("30d"),[T,R]=u.useState("overview");if(b)return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(n,{className:"h-8 w-64 mb-2"}),e.jsx(n,{className:"h-4 w-96"})]}),e.jsx(n,{className:"h-10 w-32"})]}),e.jsx(g,{columns:{xs:1,sm:2,md:2,lg:4},gap:"md",children:Array.from({length:4}).map((a,m)=>e.jsx(l,{children:e.jsxs(r,{className:"p-6",children:[e.jsx(n,{className:"h-4 w-20 mb-2"}),e.jsx(n,{className:"h-8 w-16 mb-2"}),e.jsx(n,{className:"h-3 w-24"})]})},m))})]});if(p)return e.jsxs(S,{variant:"destructive",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsxs(_,{children:["Error loading feedback analytics: ",p.message,e.jsx(N,{variant:"outline",size:"sm",onClick:()=>y(),className:"ml-2",children:"Retry"})]})]});const k=[{title:"Total Responses",value:(s==null?void 0:s.total_responses)||0,change:12,trend:"up",icon:M,description:"All time feedback responses"},{title:"Active Sessions",value:(s==null?void 0:s.total_sessions)||0,change:8,trend:"up",icon:D,description:"Current feedback sessions"},{title:"Completion Rate",value:s&&s.total_sessions>0?`${Math.round(s.completed_sessions/s.total_sessions*100)}%`:"0%",change:5,trend:"up",icon:f,description:"Session completion percentage"},{title:"Avg. Response Time",value:"2.4min",change:-8,trend:"down",icon:E,description:"Average time per response"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Feedback Analytics"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Comprehensive insights into your feedback collection performance"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(L,{value:w,onValueChange:C,children:[e.jsxs(P,{className:"w-32",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),e.jsx(B,{})]}),e.jsxs(F,{children:[e.jsx(d,{value:"7d",children:"Last 7 days"}),e.jsx(d,{value:"30d",children:"Last 30 days"}),e.jsx(d,{value:"90d",children:"Last 90 days"}),e.jsx(d,{value:"1y",children:"Last year"})]})]}),e.jsxs(N,{variant:"outline",size:"sm",children:[e.jsx($,{className:"w-4 h-4 mr-2"}),"Export"]})]})]}),e.jsx(g,{columns:{xs:1,sm:2,md:2,lg:4},gap:"md",children:k.map((a,m)=>e.jsx(l,{className:"hover:shadow-md transition-shadow duration-200",children:e.jsxs(r,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:e.jsx(a.icon,{className:"w-4 h-4 text-blue-600"})}),e.jsx("div",{children:e.jsx("p",{className:"text-sm font-medium text-gray-600",children:a.title})})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[a.trend==="up"?e.jsx(G,{className:"w-3 h-3 text-green-500"}):e.jsx(H,{className:"w-3 h-3 text-red-500"}),e.jsxs("span",{className:`text-xs font-medium ${a.trend==="up"?"text-green-500":"text-red-500"}`,children:[a.change,"%"]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:a.value}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:a.description})]})]})},m))}),e.jsxs(V,{value:T,onValueChange:R,className:"w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 space-y-4 sm:space-y-0",children:[e.jsxs(q,{className:"grid w-full max-w-md grid-cols-3",children:[e.jsx(o,{value:"overview",children:"Overview"}),e.jsx(o,{value:"trends",children:"Trends"}),e.jsx(o,{value:"insights",children:"Insights"})]}),e.jsxs(x,{variant:"outline",className:"flex items-center space-x-2 self-start sm:self-auto",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs",children:"Live Data"})]})]}),e.jsx(h,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(l,{children:[e.jsxs(i,{children:[e.jsxs(c,{className:"flex items-center space-x-2",children:[e.jsx(v,{className:"w-5 h-5"}),e.jsx("span",{children:"Response Distribution"})]}),e.jsx(j,{children:"Breakdown of responses by category and type"})]}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"Multiple Choice"}),e.jsx(x,{variant:"secondary",children:Math.round(((s==null?void 0:s.total_responses)||0)*.4)})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"Rating Scale"}),e.jsx(x,{variant:"secondary",children:Math.round(((s==null?void 0:s.total_responses)||0)*.35)})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"Open Text"}),e.jsx(x,{variant:"secondary",children:Math.round(((s==null?void 0:s.total_responses)||0)*.25)})]})]})})]}),e.jsxs(l,{children:[e.jsxs(i,{children:[e.jsxs(c,{className:"flex items-center space-x-2",children:[e.jsx(O,{className:"w-5 h-5"}),e.jsx("span",{children:"Performance Summary"})]}),e.jsx(j,{children:"Key performance indicators at a glance"})]}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Response Rate"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"w-3/4 h-full bg-green-500 rounded-full"})}),e.jsx("span",{className:"text-sm font-medium",children:"75%"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Engagement Score"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"w-4/5 h-full bg-blue-500 rounded-full"})}),e.jsx("span",{className:"text-sm font-medium",children:"8.2/10"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Satisfaction Index"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"w-5/6 h-full bg-purple-500 rounded-full"})}),e.jsx("span",{className:"text-sm font-medium",children:"4.1/5"})]})]})]})})]})]})}),e.jsx(h,{value:"trends",className:"space-y-6",children:e.jsxs(l,{children:[e.jsxs(i,{children:[e.jsx(c,{children:"Response Trends"}),e.jsx(j,{children:"Historical data showing feedback collection patterns"})]}),e.jsx(r,{children:e.jsx("div",{className:"h-64 flex items-center justify-center border-2 border-dashed border-gray-200 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx(v,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"Trend Chart"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Visual trends will appear here"})]})})})]})}),e.jsx(h,{value:"insights",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(l,{children:[e.jsx(i,{children:e.jsxs(c,{className:"flex items-center space-x-2",children:[e.jsx(f,{className:"w-5 h-5"}),e.jsx("span",{children:"Key Insights"})]})}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsx("p",{className:"text-sm font-medium text-green-800",children:"✓ Response rate increased by 12% this month"})}),e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"ℹ Peak response time: 2-4 PM weekdays"})}),e.jsx("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg",children:e.jsx("p",{className:"text-sm font-medium text-amber-800",children:"⚠ Mobile completion rate needs attention"})})]})})]}),e.jsxs(l,{children:[e.jsx(i,{children:e.jsxs(c,{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"w-5 h-5"}),e.jsx("span",{children:"Recommendations"})]})}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Optimize Mobile Experience"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Consider shorter forms for mobile users"})]}),e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Schedule Follow-ups"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Send reminders during peak hours"})]}),e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"A/B Test Questions"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Test different question formats"})]})]})})]})]})})]})]})},J=({organizationId:t})=>e.jsx(K,{permission:"view_analytics",organizationId:t,showRequiredRole:!0,fallback:e.jsxs("div",{className:"text-center p-8",children:[e.jsx("p",{className:"text-gray-500",children:"You need viewer-level access or higher to view detailed feedback analytics."}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Contact your organization administrator for access."})]}),children:e.jsx(Q,{organizationId:t})});export{J as FeedbackTab,J as default};
