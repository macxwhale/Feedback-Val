import{c as D,ai as W,aj as me,ak as V,al as be,am as Ve,an as Ye,ao as ze,s as k,af as re,ab as ie,r as b,u as te,ac as T,j as e,C as E,k as F,q,ap as Je,a4 as Ie,l as O,K as I,B as p,aq as Ze,ar as es,as as ss,at as le,au as J,av as ts,aw as B,V as as,i as ce,ax as Ke,ay as ns,az as rs,aA as is,aB as cs,aC as ls,aD as os,aE as ds,aF as us,aG as ms,aH as xe,aI as fe,aJ as ge,aK as pe,aL as hs,aM as xs,aN as fs,aO as We,aP as j,M as K,a5 as A,ag as gs,aQ as ps,E as js,aR as ys,o as Le,a8 as he,a6 as je,U as ae,aa as Re,ae as ye,m as ve,aS as ws,a0 as bs,Y as vs,J as Ns,_ as Ne,$ as Se,a1 as Ce,a2 as ke,a3 as H,T as Ss,w as Cs,x as ks,y as Me,z as _e}from"./index-QjVmUwmy.js";import{S as Ms}from"./switch-DrEgDrqN.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=D("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=D("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=D("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=D("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=D("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=D("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=D("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=D("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=D("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=D("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=D("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=D("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=D("Webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]);function ne(s,t){var o,u,f,m;const a=me(),n=(t==null?void 0:t.weekStartsOn)??((u=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:u.weekStartsOn)??a.weekStartsOn??((m=(f=a.locale)==null?void 0:f.options)==null?void 0:m.weekStartsOn)??0,r=W(s),i=r.getDay(),c=(i<n?7:0)+i-n;return r.setDate(r.getDate()-c),r.setHours(0,0,0,0),r}function de(s){return ne(s,{weekStartsOn:1})}function Qe(s){const t=W(s),a=t.getFullYear(),n=V(s,0);n.setFullYear(a+1,0,4),n.setHours(0,0,0,0);const r=de(n),i=V(s,0);i.setFullYear(a,0,4),i.setHours(0,0,0,0);const c=de(i);return t.getTime()>=r.getTime()?a+1:t.getTime()>=c.getTime()?a:a-1}function De(s){const t=W(s);return t.setHours(0,0,0,0),t}function Ys(s,t){const a=De(s),n=De(t),r=+a-be(a),i=+n-be(n);return Math.round((r-i)/Ve)}function Is(s){const t=Qe(s),a=V(s,0);return a.setFullYear(t,0,4),a.setHours(0,0,0,0),de(a)}function Ks(s){return s instanceof Date||typeof s=="object"&&Object.prototype.toString.call(s)==="[object Date]"}function Ws(s){if(!Ks(s)&&typeof s!="number")return!1;const t=W(s);return!isNaN(Number(t))}function Ls(s){const t=W(s),a=V(s,0);return a.setFullYear(t.getFullYear(),0,1),a.setHours(0,0,0,0),a}function Rs(s){const t=W(s);return Ys(t,Ls(t))+1}function Qs(s){const t=W(s),a=+de(t)-+Is(t);return Math.round(a/Ye)+1}function He(s,t){var m,d,l,N;const a=W(s),n=a.getFullYear(),r=me(),i=(t==null?void 0:t.firstWeekContainsDate)??((d=(m=t==null?void 0:t.locale)==null?void 0:m.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((N=(l=r.locale)==null?void 0:l.options)==null?void 0:N.firstWeekContainsDate)??1,c=V(s,0);c.setFullYear(n+1,0,i),c.setHours(0,0,0,0);const o=ne(c,t),u=V(s,0);u.setFullYear(n,0,i),u.setHours(0,0,0,0);const f=ne(u,t);return a.getTime()>=o.getTime()?n+1:a.getTime()>=f.getTime()?n:n-1}function Hs(s,t){var o,u,f,m;const a=me(),n=(t==null?void 0:t.firstWeekContainsDate)??((u=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:u.firstWeekContainsDate)??a.firstWeekContainsDate??((m=(f=a.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,r=He(s,t),i=V(s,0);return i.setFullYear(r,0,n),i.setHours(0,0,0,0),ne(i,t)}function Bs(s,t){const a=W(s),n=+ne(a,t)-+Hs(a,t);return Math.round(n/Ye)+1}function y(s,t){const a=s<0?"-":"",n=Math.abs(s).toString().padStart(t,"0");return a+n}const U={y(s,t){const a=s.getFullYear(),n=a>0?a:1-a;return y(t==="yy"?n%100:n,t.length)},M(s,t){const a=s.getMonth();return t==="M"?String(a+1):y(a+1,2)},d(s,t){return y(s.getDate(),t.length)},a(s,t){const a=s.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h(s,t){return y(s.getHours()%12||12,t.length)},H(s,t){return y(s.getHours(),t.length)},m(s,t){return y(s.getMinutes(),t.length)},s(s,t){return y(s.getSeconds(),t.length)},S(s,t){const a=t.length,n=s.getMilliseconds(),r=Math.trunc(n*Math.pow(10,a-3));return y(r,t.length)}},Z={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Te={G:function(s,t,a){const n=s.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return a.era(n,{width:"abbreviated"});case"GGGGG":return a.era(n,{width:"narrow"});case"GGGG":default:return a.era(n,{width:"wide"})}},y:function(s,t,a){if(t==="yo"){const n=s.getFullYear(),r=n>0?n:1-n;return a.ordinalNumber(r,{unit:"year"})}return U.y(s,t)},Y:function(s,t,a,n){const r=He(s,n),i=r>0?r:1-r;if(t==="YY"){const c=i%100;return y(c,2)}return t==="Yo"?a.ordinalNumber(i,{unit:"year"}):y(i,t.length)},R:function(s,t){const a=Qe(s);return y(a,t.length)},u:function(s,t){const a=s.getFullYear();return y(a,t.length)},Q:function(s,t,a){const n=Math.ceil((s.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return y(n,2);case"Qo":return a.ordinalNumber(n,{unit:"quarter"});case"QQQ":return a.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(n,{width:"wide",context:"formatting"})}},q:function(s,t,a){const n=Math.ceil((s.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return y(n,2);case"qo":return a.ordinalNumber(n,{unit:"quarter"});case"qqq":return a.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(n,{width:"wide",context:"standalone"})}},M:function(s,t,a){const n=s.getMonth();switch(t){case"M":case"MM":return U.M(s,t);case"Mo":return a.ordinalNumber(n+1,{unit:"month"});case"MMM":return a.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(n,{width:"wide",context:"formatting"})}},L:function(s,t,a){const n=s.getMonth();switch(t){case"L":return String(n+1);case"LL":return y(n+1,2);case"Lo":return a.ordinalNumber(n+1,{unit:"month"});case"LLL":return a.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(n,{width:"wide",context:"standalone"})}},w:function(s,t,a,n){const r=Bs(s,n);return t==="wo"?a.ordinalNumber(r,{unit:"week"}):y(r,t.length)},I:function(s,t,a){const n=Qs(s);return t==="Io"?a.ordinalNumber(n,{unit:"week"}):y(n,t.length)},d:function(s,t,a){return t==="do"?a.ordinalNumber(s.getDate(),{unit:"date"}):U.d(s,t)},D:function(s,t,a){const n=Rs(s);return t==="Do"?a.ordinalNumber(n,{unit:"dayOfYear"}):y(n,t.length)},E:function(s,t,a){const n=s.getDay();switch(t){case"E":case"EE":case"EEE":return a.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(n,{width:"short",context:"formatting"});case"EEEE":default:return a.day(n,{width:"wide",context:"formatting"})}},e:function(s,t,a,n){const r=s.getDay(),i=(r-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return y(i,2);case"eo":return a.ordinalNumber(i,{unit:"day"});case"eee":return a.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(r,{width:"short",context:"formatting"});case"eeee":default:return a.day(r,{width:"wide",context:"formatting"})}},c:function(s,t,a,n){const r=s.getDay(),i=(r-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return y(i,t.length);case"co":return a.ordinalNumber(i,{unit:"day"});case"ccc":return a.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(r,{width:"narrow",context:"standalone"});case"cccccc":return a.day(r,{width:"short",context:"standalone"});case"cccc":default:return a.day(r,{width:"wide",context:"standalone"})}},i:function(s,t,a){const n=s.getDay(),r=n===0?7:n;switch(t){case"i":return String(r);case"ii":return y(r,t.length);case"io":return a.ordinalNumber(r,{unit:"day"});case"iii":return a.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(n,{width:"short",context:"formatting"});case"iiii":default:return a.day(n,{width:"wide",context:"formatting"})}},a:function(s,t,a){const r=s.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(s,t,a){const n=s.getHours();let r;switch(n===12?r=Z.noon:n===0?r=Z.midnight:r=n/12>=1?"pm":"am",t){case"b":case"bb":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(s,t,a){const n=s.getHours();let r;switch(n>=17?r=Z.evening:n>=12?r=Z.afternoon:n>=4?r=Z.morning:r=Z.night,t){case"B":case"BB":case"BBB":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(s,t,a){if(t==="ho"){let n=s.getHours()%12;return n===0&&(n=12),a.ordinalNumber(n,{unit:"hour"})}return U.h(s,t)},H:function(s,t,a){return t==="Ho"?a.ordinalNumber(s.getHours(),{unit:"hour"}):U.H(s,t)},K:function(s,t,a){const n=s.getHours()%12;return t==="Ko"?a.ordinalNumber(n,{unit:"hour"}):y(n,t.length)},k:function(s,t,a){let n=s.getHours();return n===0&&(n=24),t==="ko"?a.ordinalNumber(n,{unit:"hour"}):y(n,t.length)},m:function(s,t,a){return t==="mo"?a.ordinalNumber(s.getMinutes(),{unit:"minute"}):U.m(s,t)},s:function(s,t,a){return t==="so"?a.ordinalNumber(s.getSeconds(),{unit:"second"}):U.s(s,t)},S:function(s,t){return U.S(s,t)},X:function(s,t,a){const n=s.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return qe(n);case"XXXX":case"XX":return X(n);case"XXXXX":case"XXX":default:return X(n,":")}},x:function(s,t,a){const n=s.getTimezoneOffset();switch(t){case"x":return qe(n);case"xxxx":case"xx":return X(n);case"xxxxx":case"xxx":default:return X(n,":")}},O:function(s,t,a){const n=s.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Fe(n,":");case"OOOO":default:return"GMT"+X(n,":")}},z:function(s,t,a){const n=s.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Fe(n,":");case"zzzz":default:return"GMT"+X(n,":")}},t:function(s,t,a){const n=Math.trunc(s.getTime()/1e3);return y(n,t.length)},T:function(s,t,a){const n=s.getTime();return y(n,t.length)}};function Fe(s,t=""){const a=s>0?"-":"+",n=Math.abs(s),r=Math.trunc(n/60),i=n%60;return i===0?a+String(r):a+String(r)+t+y(i,2)}function qe(s,t){return s%60===0?(s>0?"-":"+")+y(Math.abs(s)/60,2):X(s,t)}function X(s,t=""){const a=s>0?"-":"+",n=Math.abs(s),r=y(Math.trunc(n/60),2),i=y(n%60,2);return a+r+t+i}const Ae=(s,t)=>{switch(s){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Be=(s,t)=>{switch(s){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Us=(s,t)=>{const a=s.match(/(P+)(p+)?/)||[],n=a[1],r=a[2];if(!r)return Ae(s,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",Ae(n,t)).replace("{{time}}",Be(r,t))},$s={p:Be,P:Us},Gs=/^D+$/,Xs=/^Y+$/,Vs=["D","DD","YY","YYYY"];function zs(s){return Gs.test(s)}function Js(s){return Xs.test(s)}function Zs(s,t,a){const n=et(s,t,a);if(console.warn(n),Vs.includes(s))throw new RangeError(n)}function et(s,t,a){const n=s[0]==="Y"?"years":"days of the month";return`Use \`${s.toLowerCase()}\` instead of \`${s}\` (in \`${t}\`) for formatting ${n} to the input \`${a}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const st=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,tt=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,at=/^'([^]*?)'?$/,nt=/''/g,rt=/[a-zA-Z]/;function it(s,t,a){var m,d,l,N;const n=me(),r=n.locale??ze,i=n.firstWeekContainsDate??((d=(m=n.locale)==null?void 0:m.options)==null?void 0:d.firstWeekContainsDate)??1,c=n.weekStartsOn??((N=(l=n.locale)==null?void 0:l.options)==null?void 0:N.weekStartsOn)??0,o=W(s);if(!Ws(o))throw new RangeError("Invalid time value");let u=t.match(tt).map(h=>{const x=h[0];if(x==="p"||x==="P"){const S=$s[x];return S(h,r.formatLong)}return h}).join("").match(st).map(h=>{if(h==="''")return{isToken:!1,value:"'"};const x=h[0];if(x==="'")return{isToken:!1,value:ct(h)};if(Te[x])return{isToken:!0,value:h};if(x.match(rt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return{isToken:!1,value:h}});r.localize.preprocessor&&(u=r.localize.preprocessor(o,u));const f={firstWeekContainsDate:i,weekStartsOn:c,locale:r};return u.map(h=>{if(!h.isToken)return h.value;const x=h.value;(Js(x)||zs(x))&&Zs(x,t,String(s));const S=Te[x[0]];return S(o,x,r.localize,f)}).join("")}function ct(s){const t=s.match(at);return t?t[1].replace(nt,"'"):s}const lt=async s=>{const{data:t,error:a}=await k.from("api_keys").select("id, key_name, key_prefix, status, last_used_at, expires_at, created_at").eq("organization_id",s).order("created_at",{ascending:!1});if(a)throw a;return t},ot=async(s,t)=>{const{data:a,error:n}=await k.rpc("create_api_key",{p_organization_id:s,p_key_name:t});if(n)throw n;return a},dt=async(s,t)=>{const{data:a,error:n}=await k.from("api_keys").update({status:t}).eq("id",s).select().single();if(n)throw n;return a},ut=({apiKey:s})=>{const[t,a]=b.useState(!1),n=()=>{navigator.clipboard.writeText(s),a(!0),j({title:"API Key Copied!",description:"The key has been copied to your clipboard."}),setTimeout(()=>a(!1),2e3)};return e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-secondary rounded-md",children:[e.jsx("code",{className:"text-sm font-mono break-all",children:s}),e.jsx(p,{variant:"ghost",size:"icon",onClick:n,children:t?e.jsx(We,{className:"h-4 w-4 text-green-500"}):e.jsx(oe,{className:"h-4 w-4"})})]})},mt=()=>{const{organization:s}=re(),t=ie(),[a,n]=b.useState(""),[r,i]=b.useState(null),c=["apiKeys",s==null?void 0:s.id],{data:o,isLoading:u}=te({queryKey:c,queryFn:()=>lt(s.id),enabled:!!s}),f=T({mutationFn:l=>ot(s.id,l),onSuccess:l=>{j({title:"API Key Created",description:"Make sure to copy your key. You won't see it again."}),i(l),n(""),t.invalidateQueries({queryKey:c})},onError:l=>{j({title:"Error",description:l.message,variant:"destructive"})}}),m=T({mutationFn:({keyId:l,status:N})=>dt(l,N),onSuccess:()=>{j({title:"Status Updated"}),t.invalidateQueries({queryKey:c})},onError:l=>{j({title:"Error",description:l.message,variant:"destructive"})}}),d=l=>{l.preventDefault(),a.trim()&&s&&f.mutate(a.trim())};return e.jsxs(E,{className:"w-full",children:[e.jsxs(F,{children:[e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(Je,{})," API Keys"]}),e.jsx(Ie,{children:"Manage API keys for programmatic access to your organization's data."})]}),e.jsxs(O,{children:[e.jsxs("form",{onSubmit:d,className:"flex items-center gap-2 mb-6",children:[e.jsx(I,{placeholder:"New key name (e.g., 'SMS Integration')",value:a,onChange:l=>n(l.target.value),disabled:f.isPending}),e.jsxs(p,{type:"submit",disabled:!a.trim()||f.isPending,children:[f.isPending?e.jsx(Ze,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(Es,{className:"mr-2 h-4 w-4"}),"Create Key"]})]}),e.jsx("div",{className:"border rounded-md",children:e.jsxs(es,{children:[e.jsx(ss,{children:e.jsxs(le,{children:[e.jsx(J,{children:"Name"}),e.jsx(J,{children:"Key Prefix"}),e.jsx(J,{children:"Status"}),e.jsx(J,{children:"Last Used"}),e.jsx(J,{children:"Created"}),e.jsx(J,{className:"text-right",children:"Actions"})]})}),e.jsx(ts,{children:u?Array.from({length:3}).map((l,N)=>e.jsx(le,{children:e.jsx(B,{colSpan:6,children:e.jsx(as,{className:"h-8 w-full"})})},N)):o&&o.length>0?o.map(l=>e.jsxs(le,{children:[e.jsx(B,{className:"font-medium",children:l.key_name}),e.jsx(B,{children:e.jsxs("code",{children:[l.key_prefix,"..."]})}),e.jsx(B,{children:e.jsx(ce,{variant:l.status==="active"?"default":"secondary",children:l.status})}),e.jsx(B,{children:l.last_used_at?`${Ke(new Date(l.last_used_at))} ago`:"Never"}),e.jsx(B,{children:it(new Date(l.created_at),"MMM d, yyyy")}),e.jsx(B,{className:"text-right",children:e.jsxs(ns,{children:[e.jsx(rs,{asChild:!0,children:e.jsx(p,{variant:"ghost",size:"icon",disabled:m.isPending,children:l.status==="active"?e.jsx(Ts,{className:"h-4 w-4"}):e.jsx(Fs,{className:"h-4 w-4"})})}),e.jsxs(is,{children:[e.jsxs(cs,{children:[e.jsx(ls,{children:"Are you sure?"}),e.jsxs(os,{children:["This will ",l.status==="active"?"deactivate":"activate"," the API key.",l.status==="active"?" Applications using it will lose access.":" Applications will regain access."]})]}),e.jsxs(ds,{children:[e.jsx(us,{children:"Cancel"}),e.jsx(ms,{onClick:()=>m.mutate({keyId:l.id,status:l.status==="active"?"inactive":"active"}),children:"Continue"})]})]})]})})]},l.id)):e.jsx(le,{children:e.jsx(B,{colSpan:6,className:"text-center text-muted-foreground py-8",children:"No API keys created yet."})})})]})}),e.jsx(xe,{open:!!r,onOpenChange:l=>!l&&i(null),children:e.jsxs(fe,{children:[e.jsxs(ge,{children:[e.jsx(pe,{children:"API Key Created Successfully"}),e.jsx(hs,{children:"Please copy this key and store it securely. You will not be able to see it again."})]}),e.jsx(ut,{apiKey:r||""}),e.jsx(xs,{children:e.jsx(fs,{asChild:!0,children:e.jsx(p,{children:"Close"})})})]})})]})]})},ht=({organization:s,currentSettings:t,onSettingsUpdate:a})=>{var u,f;const n=ie(),[r,i]=b.useState({username:((u=t==null?void 0:t.sms_settings)==null?void 0:u.username)||"",apiKey:((f=t==null?void 0:t.sms_settings)==null?void 0:f.apiKey)||"",senderId:(t==null?void 0:t.sms_sender_id)||""}),c=T({mutationFn:async m=>{const{data:d,error:l}=await k.functions.invoke("update-sms-settings",{body:{orgId:s.id,enabled:!0,senderId:m.senderId,username:m.username,apiKey:m.apiKey}});if(l)throw l;return d},onSuccess:()=>{j({title:"Success",description:"SMS settings updated successfully"}),n.invalidateQueries({queryKey:["organization-sms-settings"]}),a()},onError:m=>{j({title:"Error",description:m.message||"Failed to update SMS settings",variant:"destructive"})}}),o=m=>{if(m.preventDefault(),!r.username.trim()||!r.apiKey.trim()||!r.senderId.trim()){j({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}c.mutate(r)};return e.jsxs(E,{children:[e.jsx(F,{children:e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5"}),"SMS Provider Settings"]})}),e.jsx(O,{children:e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"username",children:"Username *"}),e.jsx(I,{id:"username",type:"text",value:r.username,onChange:m=>i(d=>({...d,username:m.target.value})),placeholder:"Enter your SMS provider username",required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"apiKey",children:"API Key *"}),e.jsx(I,{id:"apiKey",type:"password",value:r.apiKey,onChange:m=>i(d=>({...d,apiKey:m.target.value})),placeholder:"Enter your SMS provider API key",required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"senderId",children:"Sender ID *"}),e.jsx(I,{id:"senderId",type:"text",value:r.senderId,onChange:m=>i(d=>({...d,senderId:m.target.value})),placeholder:"Enter your sender ID (e.g., 12345)",required:!0}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"This is your SMS sender identifier that recipients will see"})]}),e.jsxs(p,{type:"submit",disabled:c.isPending,className:"w-full",children:[e.jsx(gs,{className:"w-4 h-4 mr-2"}),c.isPending?"Saving...":"Save Settings"]})]})})]})},xt=({enabled:s,onToggle:t,isLoading:a})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"SMS Feedback"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow customers to provide feedback via SMS"})]}),e.jsx(Ms,{checked:s,onCheckedChange:t,disabled:a})]}),ft=({webhookSecret:s,isVisible:t,isFlaskWrapper:a=!1})=>{const[n,r]=b.useState(!1),o=`${window.location.origin}${a?"/functions/v1/handle-flask-sms-callback":"/functions/v1/handle-sms-webhook"}`,u=f=>{navigator.clipboard.writeText(f),j({title:"Copied to clipboard",description:"Webhook URL has been copied to your clipboard"})};return t?e.jsxs(E,{children:[e.jsx(F,{children:e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(As,{className:"w-5 h-5"}),a?"Flask Webhook Configuration":"SMS Webhook Configuration"]})}),e.jsxs(O,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Webhook URL"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{value:o,readOnly:!0,className:"font-mono text-sm"}),e.jsx(p,{onClick:()=>u(o),variant:"outline",size:"icon",children:e.jsx(oe,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a?"Configure your Flask wrapper to send callbacks to this URL":"Configure this URL in your Africa's Talking SMS callback settings"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Webhook Secret"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{type:n?"text":"password",value:s,readOnly:!0,className:"font-mono text-sm"}),e.jsx(p,{onClick:()=>r(!n),variant:"outline",size:"icon",type:"button",children:n?e.jsx(ps,{className:"w-4 h-4"}):e.jsx(js,{className:"w-4 h-4"})}),e.jsx(p,{onClick:()=>u(s),variant:"outline",size:"icon",children:e.jsx(oe,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Use this secret to verify webhook authenticity"})]}),a&&e.jsx("div",{className:"p-4 bg-muted rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ys,{className:"w-5 h-5 text-blue-500 mt-0.5"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-medium text-sm",children:"Flask Integration Notes:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• Your Flask wrapper should forward SMS callbacks to the webhook URL above"}),e.jsx("li",{children:"• Include the webhook secret in your callback validation"}),e.jsxs("li",{children:["• Ensure the callback format matches: ","{linkId, text, to, id, date, from}"]}),e.jsx("li",{children:"• The 'to' field should contain your organization's sender ID"})]})]})]})})]})]}):null},gt=({selectedProvider:s,onProviderSelect:t})=>{const a={id:"sms-provider",name:"SMS Provider (Flask Wrapper)",description:"SMS services via Flask wrapper integration",icon:K,status:"available"};return e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium",children:"SMS Integration"}),e.jsx("div",{className:`border rounded-lg p-4 cursor-pointer transition-colors ${s===a.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>t(s===a.id?null:a.id),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(a.icon,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium",children:a.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{variant:"default",children:"Available"}),s===a.id&&e.jsx(We,{className:"w-4 h-4 text-blue-500"})]})]})})]})},ue=(s,t)=>{if(!s||typeof s!="object")return"";const a=s[t];return typeof a=="string"?a:""},pt=s=>{if(!s||typeof s!="object")return!1;const t=ue(s,"username"),a=ue(s,"apiKey");return t.length>0&&a.length>0},jt=()=>e.jsxs(F,{children:[e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5"}),"SMS Integrations"]}),e.jsx(Ie,{children:"Enable SMS feedback collection from your customers"})]}),yt=({title:s="SMS Integrations"})=>e.jsxs(E,{children:[e.jsx(F,{children:e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5"}),s]})}),e.jsx(O,{children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-20 bg-gray-200 rounded"})]})})]}),wt=({title:s="SMS Integrations",message:t,onRetry:a})=>e.jsxs(E,{children:[e.jsx(F,{children:e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"w-5 h-5 text-red-500"}),s]})}),e.jsx(O,{children:e.jsxs("div",{className:"text-center p-4",children:[e.jsx("p",{className:"text-sm text-red-600 mb-2",children:"Organization not found or failed to load"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:t}),a&&e.jsx("button",{onClick:a,className:"text-sm text-blue-600 hover:underline",children:"Try again"})]})})]}),bt=()=>e.jsxs(E,{children:[e.jsx(F,{children:e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5"}),"SMS Integrations"]})}),e.jsx(O,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"You need admin access to manage SMS integrations."})})]}),vt=({phoneNumber:s,name:t,onPhoneNumberChange:a,onNameChange:n,onSubmit:r,isLoading:i})=>e.jsx("form",{onSubmit:r,className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"phone-number",children:"Phone Number *"}),e.jsx(I,{id:"phone-number",value:s,onChange:c=>a(c.target.value),placeholder:"+1234567890",required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"name",children:"Name (Optional)"}),e.jsx(I,{id:"name",value:t,onChange:c=>n(c.target.value),placeholder:"John Doe"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(p,{type:"submit",disabled:i,className:"w-full",children:[e.jsx(he,{className:"w-4 h-4 mr-2"}),"Add Number"]})})]})}),Nt=({bulkNumbers:s,onBulkNumbersChange:t,onBulkAdd:a,onCancel:n,isLoading:r})=>e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-gray-50",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"bulk-numbers",children:"Bulk Add Phone Numbers"}),e.jsx(je,{id:"bulk-numbers",value:s,onChange:i=>t(i.target.value),placeholder:"Enter phone numbers, one per line. Format: +1234567890 or +1234567890,John Doe",rows:6}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Format: One phone number per line. Optionally add name after comma."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{onClick:a,disabled:r,children:"Add All Numbers"}),e.jsx(p,{variant:"outline",onClick:n,children:"Cancel"})]})]}),St=({phoneNumbers:s,onDelete:t,isDeleting:a})=>{const n=r=>r.startsWith("+")?r:`+${r}`;return s.length===0?e.jsxs("div",{className:"text-center p-8 text-muted-foreground",children:[e.jsx(ae,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No phone numbers added yet."}),e.jsx("p",{className:"text-sm",children:"Add phone numbers to start sending SMS campaigns."})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Registered Phone Numbers"}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:s.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:n(r.phone_number)}),r.name&&e.jsx("div",{className:"text-sm text-muted-foreground",children:r.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(ce,{variant:r.status==="active"?"default":"secondary",children:r.status}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Added ",new Date(r.created_at).toLocaleDateString()]})]})]}),e.jsx(p,{variant:"ghost",size:"sm",onClick:()=>t(r.id),disabled:a,children:e.jsx(Re,{className:"w-4 h-4"})})]},r.id))})]})},Ct=()=>{const{organization:s}=re(),t=ie(),[a,n]=b.useState(""),[r,i]=b.useState(""),[c,o]=b.useState(""),[u,f]=b.useState(!1),{data:m,isLoading:d}=te({queryKey:["sms-phone-numbers",s==null?void 0:s.id],queryFn:async()=>{const{data:g,error:w}=await k.from("sms_phone_numbers").select("*").eq("organization_id",s.id).order("created_at",{ascending:!1});if(w)throw w;return g},enabled:!!(s!=null&&s.id)}),l=T({mutationFn:async({phoneNumber:g,name:w})=>{const{data:C,error:_}=await k.from("sms_phone_numbers").insert({organization_id:s.id,phone_number:g.trim(),name:(w==null?void 0:w.trim())||null}).select().single();if(_)throw _;return C},onSuccess:()=>{j({title:"Phone number added successfully"}),n(""),i(""),t.invalidateQueries({queryKey:["sms-phone-numbers",s==null?void 0:s.id]})},onError:g=>{j({title:"Error adding phone number",description:g.message,variant:"destructive"})}}),N=T({mutationFn:async g=>{const{data:w,error:C}=await k.from("sms_phone_numbers").insert(g.map(({phoneNumber:_,name:M})=>({organization_id:s.id,phone_number:_.trim(),name:(M==null?void 0:M.trim())||null})));if(C)throw C;return w},onSuccess:()=>{j({title:"Phone numbers added successfully"}),o(""),f(!1),t.invalidateQueries({queryKey:["sms-phone-numbers",s==null?void 0:s.id]})},onError:g=>{j({title:"Error adding phone numbers",description:g.message,variant:"destructive"})}}),h=T({mutationFn:async g=>{const{error:w}=await k.from("sms_phone_numbers").delete().eq("id",g);if(w)throw w},onSuccess:()=>{j({title:"Phone number removed successfully"}),t.invalidateQueries({queryKey:["sms-phone-numbers",s==null?void 0:s.id]})},onError:g=>{j({title:"Error removing phone number",description:g.message,variant:"destructive"})}}),x=g=>{g.preventDefault(),a.trim()&&l.mutate({phoneNumber:a,name:r})},S=()=>{const w=c.split(`
`).filter(C=>C.trim()).map(C=>{const _=C.split(",").map(M=>M.trim());return{phoneNumber:_[0],name:_[1]||void 0}}).filter(C=>C.phoneNumber);if(w.length===0){j({title:"No valid phone numbers found",description:"Please enter at least one phone number",variant:"destructive"});return}N.mutate(w)};return d?e.jsxs(E,{children:[e.jsx(F,{children:e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"w-5 h-5"}),"Phone Numbers"]})}),e.jsx(O,{children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-20 bg-gray-200 rounded"})]})})]}):e.jsxs(E,{children:[e.jsx(F,{children:e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"w-5 h-5"}),"Phone Numbers (",(m==null?void 0:m.length)||0,")"]})}),e.jsxs(O,{className:"space-y-6",children:[e.jsx(vt,{phoneNumber:a,name:r,onPhoneNumberChange:n,onNameChange:i,onSubmit:x,isLoading:l.isPending}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(p,{variant:"outline",onClick:()=>f(!u),children:[e.jsx(qs,{className:"w-4 h-4 mr-2"}),"Bulk Add"]})}),u&&e.jsx(Nt,{bulkNumbers:c,onBulkNumbersChange:o,onBulkAdd:S,onCancel:()=>f(!1),isLoading:N.isPending}),e.jsx(St,{phoneNumbers:m||[],onDelete:g=>h.mutate(g),isDeleting:h.isPending})]})]})},kt=()=>{const{user:s}=ye(),{organization:t}=re(),a=ie(),{data:n=[],isLoading:r,error:i}=te({queryKey:["sms-campaigns",t==null?void 0:t.id],queryFn:async()=>{if(!(t!=null&&t.id))return[];const{data:h,error:x}=await k.from("sms_campaigns").select("*").eq("organization_id",t.id).order("created_at",{ascending:!1});if(x)throw x;return h||[]},enabled:!!(t!=null&&t.id)}),{data:c=[],isLoading:o,error:u}=te({queryKey:["sms-phone-numbers",t==null?void 0:t.id],queryFn:async()=>{if(!(t!=null&&t.id))return[];const{data:h,error:x}=await k.from("sms_phone_numbers").select("*").eq("organization_id",t.id).eq("status","active").order("created_at",{ascending:!1});if(x)throw x;return h||[]},enabled:!!(t!=null&&t.id)}),f=T({mutationFn:async({name:h,template:x})=>{if(!(t!=null&&t.id)||!(s!=null&&s.id))throw new Error("Missing organization or user");const{data:S,error:g}=await k.from("sms_campaigns").insert({organization_id:t.id,name:h,message_template:x,created_by_user_id:s.id,status:"draft"}).select().single();if(g)throw g;return S},onSuccess:()=>{a.invalidateQueries({queryKey:["sms-campaigns"]}),j({title:"Success",description:"Campaign created successfully"})},onError:h=>{console.error("Error creating campaign:",h),j({title:"Error",description:"Failed to create campaign",variant:"destructive"})}}),m=T({mutationFn:async({campaignId:h,name:x,template:S})=>{const{data:g,error:w}=await k.from("sms_campaigns").update({name:x,message_template:S,updated_at:new Date().toISOString()}).eq("id",h).select().single();if(w)throw w;return g},onSuccess:()=>{a.invalidateQueries({queryKey:["sms-campaigns"]}),j({title:"Success",description:"Campaign updated successfully"})},onError:h=>{console.error("Error updating campaign:",h),j({title:"Error",description:"Failed to update campaign",variant:"destructive"})}}),d=T({mutationFn:async h=>{const{error:x}=await k.from("sms_campaigns").delete().eq("id",h);if(x)throw x},onSuccess:()=>{a.invalidateQueries({queryKey:["sms-campaigns"]}),j({title:"Success",description:"Campaign deleted successfully"})},onError:h=>{console.error("Error deleting campaign:",h),j({title:"Error",description:"Failed to delete campaign",variant:"destructive"})}}),l=T({mutationFn:async({campaignId:h,isResend:x=!1,isRetry:S=!1})=>{const{data:g,error:w}=await k.functions.invoke("send-sms-flask",{body:{campaignId:h,isResend:x,isRetry:S}});if(w)throw w;return g},onSuccess:h=>{a.invalidateQueries({queryKey:["sms-campaigns"]}),a.invalidateQueries({queryKey:["sms-sends"]}),j({title:"Success",description:`Campaign sent successfully! ${h.sentCount}/${h.sentCount+h.failedCount} messages delivered.`})},onError:h=>{console.error("Error sending campaign:",h),j({title:"Error",description:"Failed to send campaign",variant:"destructive"})}}),N=T({mutationFn:async({campaignId:h,action:x})=>{let S;switch(x){case"pause":S="paused";break;case"resume":S="sending";break;case"cancel":S="cancelled";break;default:throw new Error("Invalid action")}const{error:g}=await k.from("sms_campaigns").update({status:S}).eq("id",h);if(g)throw g},onSuccess:(h,{action:x})=>{a.invalidateQueries({queryKey:["sms-campaigns"]}),j({title:"Success",description:`Campaign ${x}d successfully`})},onError:h=>{console.error("Error controlling campaign:",h),j({title:"Error",description:"Failed to update campaign status",variant:"destructive"})}});return{campaigns:n,campaignsLoading:r,campaignsError:i,phoneNumbers:c,phoneNumbersLoading:o,phoneNumbersError:u,createCampaignMutation:f,updateCampaignMutation:m,deleteCampaignMutation:d,sendCampaignMutation:l,campaignControlMutation:N,organization:t}},Mt=({onSubmit:s,onCancel:t,isLoading:a,phoneNumbersCount:n,organizationName:r})=>{const[i,c]=b.useState(""),[o,u]=b.useState(""),f=`Hi! We'd love your feedback on our service. Please text back 'START' to begin a quick survey. Your input helps us improve. Thank you! - ${r||"Your Company"}`,m=d=>{d.preventDefault(),!(!i.trim()||!o.trim())&&(s(i,o),c(""),u(""))};return e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-gray-50",children:[e.jsx("h4",{className:"font-medium",children:"Create New Campaign"}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"campaign-name",children:"Campaign Name *"}),e.jsx(I,{id:"campaign-name",value:i,onChange:d=>c(d.target.value),placeholder:"Feedback Request Campaign",required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"message-template",children:"Message Template *"}),e.jsx(je,{id:"message-template",value:o,onChange:d=>u(d.target.value),placeholder:f,rows:4,required:!0}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Recipients: ",n," active phone numbers"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{type:"submit",disabled:a,children:"Create Campaign"}),e.jsx(p,{type:"button",variant:"outline",onClick:t,children:"Cancel"})]})]})]})},_t=({campaign:s,onSend:t,onResend:a,onRetry:n,onCancel:r,onPause:i,onResume:c,onDuplicate:o,onSchedule:u,onEdit:f,onDelete:m,isLoading:d})=>{const[l,N]=b.useState(!1),h=L=>{switch(L){case"draft":return"bg-gray-100 text-gray-800";case"sending":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"failed":return"bg-red-100 text-red-800";case"paused":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-gray-100 text-gray-600";default:return"bg-gray-100 text-gray-800"}},x=L=>{switch(L){case"completed":return e.jsx(ve,{className:"w-4 h-4"});case"failed":return e.jsx(Pe,{className:"w-4 h-4"});case"sending":return e.jsx(vs,{className:"w-4 h-4"});default:return null}},S=s.status==="draft",g=s.status==="completed",w=s.status==="failed",C=s.status==="sending",_=s.status==="paused",M=s.status==="sending"||s.status==="paused",ee=s.status==="draft"||s.status==="failed",z=s.status==="draft"||s.status==="cancelled"||s.status==="failed";return e.jsx(E,{className:"w-full hover:shadow-md transition-shadow",children:e.jsxs(O,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.name}),e.jsxs(ce,{className:`${h(s.status)} flex items-center gap-1`,children:[x(s.status),s.status.charAt(0).toUpperCase()+s.status.slice(1)]})]}),e.jsxs("div",{className:"text-sm text-gray-500 mb-3",children:["Created ",Ke(new Date(s.created_at),{addSuffix:!0})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ae,{className:"w-4 h-4"}),e.jsxs("span",{children:[s.total_recipients||0," recipients"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(K,{className:"w-4 h-4"}),e.jsxs("span",{children:[s.sent_count||0," sent"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ve,{className:"w-4 h-4 text-green-600"}),e.jsxs("span",{children:[s.delivered_count||0," delivered"]})]}),s.failed_count>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Pe,{className:"w-4 h-4 text-red-600"}),e.jsxs("span",{children:[s.failed_count," failed"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[ee&&e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>f(s),disabled:d,children:[e.jsx(Ds,{className:"w-4 h-4 mr-1"}),"Edit"]}),S&&e.jsxs(p,{onClick:()=>t(s.id),disabled:d,size:"sm",children:[e.jsx(Ee,{className:"w-4 h-4 mr-1"}),"Send"]}),g&&e.jsxs(p,{variant:"outline",onClick:()=>a(s.id),disabled:d,size:"sm",children:[e.jsx(Oe,{className:"w-4 h-4 mr-1"}),"Resend"]}),w&&e.jsxs(p,{variant:"outline",onClick:()=>n(s.id),disabled:d,size:"sm",children:[e.jsx(Oe,{className:"w-4 h-4 mr-1"}),"Retry"]}),C&&e.jsxs(p,{variant:"outline",onClick:()=>i(s.id),disabled:d,size:"sm",children:[e.jsx(ws,{className:"w-4 h-4 mr-1"}),"Pause"]}),_&&e.jsxs(p,{variant:"outline",onClick:()=>c(s.id),disabled:d,size:"sm",children:[e.jsx(Ee,{className:"w-4 h-4 mr-1"}),"Resume"]}),M&&e.jsx(p,{variant:"outline",onClick:()=>r(s.id),disabled:d,size:"sm",children:"Cancel"}),e.jsxs(p,{variant:"outline",onClick:()=>o(s.id),disabled:d,size:"sm",children:[e.jsx(oe,{className:"w-4 h-4 mr-1"}),"Duplicate"]}),e.jsxs(p,{variant:"outline",onClick:()=>u(s.id),disabled:d,size:"sm",children:[e.jsx(bs,{className:"w-4 h-4 mr-1"}),"Schedule"]}),z&&e.jsxs(p,{variant:"outline",onClick:()=>m(s),disabled:d,size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[e.jsx(Re,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("button",{onClick:()=>N(!l),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:[l?"Hide":"Show"," message preview"]}),l&&e.jsx("div",{className:"mt-2 p-3 bg-gray-50 rounded-lg border",children:e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:s.message_template})})]}),(s.started_at||s.completed_at)&&e.jsxs("div",{className:"mt-4 text-xs text-gray-500 space-y-1",children:[s.started_at&&e.jsxs("div",{children:["Started: ",new Date(s.started_at).toLocaleString()]}),s.completed_at&&e.jsxs("div",{children:["Completed: ",new Date(s.completed_at).toLocaleString()]})]})]})})},Pt=({searchTerm:s,onSearchChange:t,statusFilter:a,onStatusFilterChange:n,sortBy:r,onSortByChange:i,sortOrder:c,onSortOrderChange:o,totalCampaigns:u,filteredCount:f})=>{const m=()=>{t(""),n("all"),i("created_at"),o("desc")},d=s||a!=="all";return e.jsxs("div",{className:"w-full space-y-4 p-4 bg-gray-50 rounded-lg border",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Os,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Filters"}),d&&e.jsxs(ce,{variant:"secondary",className:"text-xs",children:[f," of ",u]})]}),d&&e.jsx(p,{variant:"ghost",size:"sm",onClick:m,children:"Clear All"})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-3",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(I,{placeholder:"Search campaigns...",value:s,onChange:l=>t(l.target.value),className:"pl-10 w-full"})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(Ne,{value:a,onValueChange:n,children:[e.jsx(Se,{className:"w-full sm:w-[150px]",children:e.jsx(Ce,{placeholder:"Status"})}),e.jsxs(ke,{children:[e.jsx(H,{value:"all",children:"All Status"}),e.jsx(H,{value:"draft",children:"Draft"}),e.jsx(H,{value:"sending",children:"Sending"}),e.jsx(H,{value:"completed",children:"Completed"}),e.jsx(H,{value:"failed",children:"Failed"})]})]}),e.jsxs(Ne,{value:r,onValueChange:i,children:[e.jsx(Se,{className:"w-full sm:w-[150px]",children:e.jsx(Ce,{placeholder:"Sort by"})}),e.jsxs(ke,{children:[e.jsx(H,{value:"created_at",children:"Created Date"}),e.jsx(H,{value:"name",children:"Name"}),e.jsx(H,{value:"total_recipients",children:"Recipients"}),e.jsx(H,{value:"delivered_count",children:"Delivery Rate"})]})]}),e.jsx(p,{variant:"outline",size:"sm",onClick:()=>o(c==="asc"?"desc":"asc"),className:"w-full sm:w-auto",children:c==="asc"?e.jsx(Ps,{className:"w-4 h-4"}):e.jsx(_s,{className:"w-4 h-4"})})]})]})]})},Et=({campaign:s,isOpen:t,onClose:a,onSave:n,isLoading:r})=>{const[i,c]=b.useState(""),[o,u]=b.useState("");b.useEffect(()=>{s&&(c(s.name),u(s.message_template))},[s]);const f=()=>{s&&i.trim()&&o.trim()&&n(s.id,i.trim(),o.trim())},m=()=>{c(""),u(""),a()};return s?e.jsx(xe,{open:t,onOpenChange:m,children:e.jsxs(fe,{className:"max-w-md",children:[e.jsx(ge,{children:e.jsx(pe,{children:"Edit Campaign"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"campaign-name",children:"Campaign Name"}),e.jsx(I,{id:"campaign-name",value:i,onChange:d=>c(d.target.value),placeholder:"Enter campaign name",disabled:r})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"message-template",children:"Message Template"}),e.jsx(je,{id:"message-template",value:o,onChange:d=>u(d.target.value),placeholder:"Enter your message template",rows:4,disabled:r})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(p,{variant:"outline",onClick:m,disabled:r,children:"Cancel"}),e.jsx(p,{onClick:f,disabled:r||!i.trim()||!o.trim(),children:r?"Saving...":"Save Changes"})]})]})]})}):null},Ot=({campaign:s,isOpen:t,onClose:a,onDelete:n,isLoading:r})=>{const i=()=>{s&&n(s.id)};if(!s)return null;const c=s.status==="draft"||s.status==="cancelled"||s.status==="failed";return e.jsx(xe,{open:t,onOpenChange:a,children:e.jsxs(fe,{className:"max-w-md",children:[e.jsx(ge,{children:e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(Ss,{className:"w-5 h-5 text-red-600"}),"Delete Campaign"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:['Are you sure you want to delete the campaign "',s.name,'"?']}),!c&&e.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-yellow-800",children:"This campaign cannot be deleted because it has been sent or is currently active. Only draft, cancelled, or failed campaigns can be deleted."})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(p,{variant:"outline",onClick:a,disabled:r,children:"Cancel"}),e.jsx(p,{variant:"destructive",onClick:i,disabled:r||!c,children:r?"Deleting...":"Delete Campaign"})]})]})]})})},Dt=({campaigns:s,onSend:t,onResend:a,onRetry:n,onCancel:r,onPause:i,onResume:c,onDuplicate:o,onSchedule:u,onEdit:f,onDelete:m,onCreateNew:d,isLoading:l,isEditLoading:N=!1,isDeleteLoading:h=!1})=>{const[x,S]=b.useState(""),[g,w]=b.useState("all"),[C,_]=b.useState("created_at"),[M,ee]=b.useState("desc"),[z,L]=b.useState(null),[v,Y]=b.useState(null),R=b.useMemo(()=>{let P=s.filter($=>{const se=$.name.toLowerCase().includes(x.toLowerCase())||$.message_template.toLowerCase().includes(x.toLowerCase()),Q=g==="all"||$.status===g;return se&&Q});return P.sort(($,se)=>{let Q=$[C],G=se[C];if(C==="created_at"&&(Q=new Date(Q).getTime(),G=new Date(G).getTime()),typeof Q=="number"&&typeof G=="number")return M==="asc"?Q-G:G-Q;if(typeof Q=="string"&&typeof G=="string"){const we=Q.localeCompare(G);return M==="asc"?we:-we}return 0}),P},[s,x,g,C,M]),Ue=P=>{L(P)},$e=(P,$,se)=>{f(P,$,se),L(null)},Ge=P=>{Y(P)},Xe=P=>{m(P),Y(null)};return s.length===0?e.jsxs("div",{className:"w-full text-center p-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-200",children:[e.jsx(K,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No campaigns yet"}),e.jsx("p",{className:"text-gray-500 mb-6 max-w-md mx-auto",children:"Create your first SMS campaign to start reaching your audience with targeted messages."}),e.jsxs(p,{onClick:d,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(he,{className:"w-4 h-4 mr-2"}),"Create Your First Campaign"]})]}):e.jsxs("div",{className:"w-full space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Campaign Management"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.length," campaign",s.length!==1?"s":""," total",R.length!==s.length&&` • ${R.length} shown`]})]}),e.jsxs(p,{onClick:d,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(he,{className:"w-4 h-4 mr-2"}),"New Campaign"]})]}),e.jsx(Pt,{searchTerm:x,onSearchChange:S,statusFilter:g,onStatusFilterChange:w,sortBy:C,onSortByChange:_,sortOrder:M,onSortOrderChange:ee,totalCampaigns:s.length,filteredCount:R.length}),e.jsx("div",{className:"w-full space-y-4",children:R.length===0?e.jsxs("div",{className:"text-center p-8 bg-gray-50 rounded-lg",children:[e.jsx(K,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-gray-500",children:"No campaigns match your current filters."}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Try adjusting your search or filter criteria."})]}):R.map(P=>e.jsx(_t,{campaign:P,onSend:t,onResend:a,onRetry:n,onCancel:r,onPause:i,onResume:c,onDuplicate:o,onSchedule:u,onEdit:Ue,onDelete:Ge,isLoading:l},P.id))}),e.jsx(Et,{campaign:z,isOpen:!!z,onClose:()=>L(null),onSave:$e,isLoading:N}),e.jsx(Ot,{campaign:v,isOpen:!!v,onClose:()=>Y(null),onDelete:Xe,isLoading:h})]})},Tt=()=>e.jsxs("div",{className:"text-center p-8 text-muted-foreground",children:[e.jsx(ae,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No active phone numbers found."}),e.jsx("p",{className:"text-sm",children:"Add phone numbers before creating campaigns."})]}),Ft=()=>{const[s,t]=b.useState(!1),{campaigns:a,campaignsLoading:n,campaignsError:r,phoneNumbers:i,phoneNumbersLoading:c,phoneNumbersError:o,createCampaignMutation:u,updateCampaignMutation:f,deleteCampaignMutation:m,sendCampaignMutation:d,campaignControlMutation:l,organization:N}=kt(),h=(v,Y)=>{u.mutate({name:v,template:Y},{onSuccess:()=>{t(!1)}})},x=(v,Y,R)=>{f.mutate({campaignId:v,name:Y,template:R})},S=v=>{m.mutate(v)},g=v=>{d.mutate({campaignId:v})},w=v=>{d.mutate({campaignId:v,isResend:!0})},C=v=>{d.mutate({campaignId:v,isRetry:!0})},_=v=>{l.mutate({campaignId:v,action:"cancel"})},M=v=>{l.mutate({campaignId:v,action:"pause"})},ee=v=>{l.mutate({campaignId:v,action:"resume"})},z=v=>{const Y=a.find(R=>R.id===v);Y&&(u.mutate({name:`${Y.name} (Copy)`,template:Y.message_template}),j({title:"Campaign duplicated successfully"}))},L=v=>{j({title:"Scheduling feature coming soon",description:"Campaign scheduling will be available in the next update."})};return n||c?e.jsx("div",{className:"w-full",children:e.jsxs(E,{className:"w-full",children:[e.jsx(F,{children:e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5"}),"SMS Campaigns"]})}),e.jsx(O,{children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-20 bg-gray-200 rounded"})]})})]})}):r||o?e.jsx("div",{className:"w-full",children:e.jsxs(E,{className:"w-full",children:[e.jsx(F,{children:e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5"}),"SMS Campaigns"]})}),e.jsx(O,{children:e.jsxs("div",{className:"flex items-center gap-2 p-4 bg-red-50 rounded-lg",children:[e.jsx(Le,{className:"w-5 h-5 text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-800",children:"Failed to load campaigns or phone numbers"}),e.jsx("p",{className:"text-xs text-red-600 mt-1",children:(r==null?void 0:r.message)||(o==null?void 0:o.message)||"An unexpected error occurred"})]})]})})]})}):e.jsx("div",{className:"w-full",children:e.jsxs(E,{className:"w-full",children:[e.jsx(F,{children:e.jsx(q,{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5"}),"SMS Campaigns"]})})}),e.jsx(O,{className:"space-y-6 p-6",children:i.length===0?e.jsx(Tt,{}):e.jsxs("div",{className:"w-full space-y-6",children:[s&&e.jsx("div",{className:"w-full",children:e.jsx(Mt,{onSubmit:h,onCancel:()=>t(!1),isLoading:u.isPending,phoneNumbersCount:i.length,organizationName:N==null?void 0:N.name})}),e.jsx("div",{className:"w-full",children:e.jsx(Dt,{campaigns:a,onSend:g,onResend:w,onRetry:C,onCancel:_,onPause:M,onResume:ee,onDuplicate:z,onSchedule:L,onEdit:x,onDelete:S,onCreateNew:()=>t(!0),isLoading:d.isPending||l.isPending,isEditLoading:f.isPending,isDeleteLoading:m.isPending})})]})})]})})},qt=()=>e.jsx("div",{className:"w-full mt-6",children:e.jsxs(Cs,{defaultValue:"phone-numbers",className:"w-full",children:[e.jsxs(ks,{className:"grid w-full grid-cols-2 mb-6",children:[e.jsx(Me,{value:"phone-numbers",className:"flex-1",children:"Phone Numbers"}),e.jsx(Me,{value:"campaigns",className:"flex-1",children:"Campaigns"})]}),e.jsx(_e,{value:"phone-numbers",className:"w-full mt-0",children:e.jsx("div",{className:"w-full",children:e.jsx(Ct,{})})}),e.jsx(_e,{value:"campaigns",className:"w-full mt-0",children:e.jsx("div",{className:"w-full",children:e.jsx(Ft,{})})})]})}),At=()=>{const{organization:s}=re(),t=ie(),{data:a,isLoading:n,error:r}=te({queryKey:["organization-sms-settings",s==null?void 0:s.id],queryFn:async()=>{console.log("Fetching SMS settings for organization:",s==null?void 0:s.id);const{data:c,error:o}=await k.from("organizations").select("sms_enabled, sms_sender_id, sms_settings, webhook_secret").eq("id",s.id).single();if(o)throw console.error("Error fetching organization SMS settings:",o),o;return console.log("Organization SMS settings fetched:",c),c},enabled:!!(s!=null&&s.id),retry:3,retryDelay:1e3}),i=T({mutationFn:async c=>{if(!(s!=null&&s.id))throw new Error("Organization not found");console.log("Updating SMS status:",{enabled:c,orgId:s.id});const{data:o,error:u}=await k.functions.invoke("update-sms-settings",{body:{orgId:s.id,enabled:c,senderId:(a==null?void 0:a.sms_sender_id)||"",username:ue(a==null?void 0:a.sms_settings,"username"),apiKey:ue(a==null?void 0:a.sms_settings,"apiKey")}});if(u)throw console.error("SMS status update error:",u),new Error(u.message||"Failed to update SMS settings");return console.log("SMS status updated successfully:",o),o},onSuccess:()=>{j({title:"SMS status updated successfully"}),t.invalidateQueries({queryKey:["organization-sms-settings",s==null?void 0:s.id]})},onError:c=>{console.error("SMS toggle error:",c),j({title:"Error updating SMS status",description:c.message||"An unexpected error occurred",variant:"destructive"})}});return{orgData:a,isLoading:n,error:r,updateSmsStatus:i,organization:s}},Yt=()=>{const{isAdmin:s,isOrgAdmin:t}=ye(),[a,n]=b.useState(null),{orgData:r,isLoading:i,error:c,updateSmsStatus:o,organization:u}=At(),f=s||t,m=l=>{if(!f){j({title:"Access denied",description:"You need admin access to manage SMS settings",variant:"destructive"});return}if(!(u!=null&&u.id)){j({title:"Error",description:"Organization not found",variant:"destructive"});return}o.mutate(l)};if(!f)return e.jsx(bt,{});if(i)return e.jsx(yt,{});if(c){const l=typeof c=="string"?c:"Failed to load SMS settings";return e.jsx(wt,{message:l})}const d=(r==null?void 0:r.sms_enabled)&&pt(r==null?void 0:r.sms_settings);return e.jsx("div",{className:"w-full",children:e.jsxs(E,{className:"w-full",children:[e.jsx(jt,{}),e.jsxs(O,{className:"space-y-6 p-6",children:[e.jsx(xt,{enabled:(r==null?void 0:r.sms_enabled)||!1,onToggle:m,isLoading:o.isPending}),(r==null?void 0:r.sms_enabled)&&e.jsx(ft,{webhookSecret:(r==null?void 0:r.webhook_secret)||"",isVisible:!0,isFlaskWrapper:!0}),e.jsx(gt,{selectedProvider:a,onProviderSelect:n}),a==="sms-provider"&&e.jsx(ht,{organization:u,currentSettings:r,onSettingsUpdate:()=>{}}),d&&e.jsx("div",{className:"w-full",children:e.jsx(qt,{})})]})]})})},Wt=()=>{const{isAdmin:s,isOrgAdmin:t}=ye();return re(),s||t?e.jsxs("div",{className:"w-full space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Integrations"}),e.jsx("p",{className:"text-muted-foreground",children:"Connect your organization to other services and automate your workflows."})]}),e.jsx("div",{className:"w-full",children:e.jsx(Yt,{})}),e.jsx("div",{className:"w-full",children:e.jsx(mt,{})})]}):e.jsxs("div",{className:"text-center p-8",children:[e.jsx("p",{className:"text-gray-500",children:"You need organization admin access to manage integrations."}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Contact your organization administrator for access."})]})};export{Wt as IntegrationsTab,Wt as default};
