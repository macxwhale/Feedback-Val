import{j as e,y as g,C as t,l,U as x,F as b,E as N,p as o,i as r,t as v,v as y,w as h,x as u,k as n,q as i,a2 as d}from"./index-B57QPpVD.js";import{u as f}from"./useAnalyticsTableData-DqUlrd8i.js";import{P as w}from"./PermissionGuard-D3gTVJ6L.js";const C=({organizationId:c})=>{const{data:s,isLoading:j}=f(c);if(j)return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-64 mb-2 animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-96 animate-pulse"})]}),e.jsx("div",{className:"h-10 bg-gray-200 rounded w-32 animate-pulse"})]}),e.jsx(g,{columns:{xs:1,sm:2,md:2,lg:4},gap:"md",children:Array.from({length:4}).map((a,m)=>e.jsx(t,{children:e.jsxs(l,{className:"p-6",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 mb-2 animate-pulse"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-16 mb-2 animate-pulse"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-24 animate-pulse"})]})},m))})]});if(!s)return e.jsx(t,{children:e.jsxs(l,{className:"p-6 text-center",children:[e.jsx(x,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-gray-500",children:"No customer insights data available"})]})});const p=[{title:"Total Customers",value:s.summary.total_responses||0,change:12,trend:"up",icon:x,description:"Unique feedback participants"},{title:"Engagement Rate",value:`${Math.round(s.summary.completed_sessions/Math.max(s.summary.total_sessions,1)*100)}%`,change:8,trend:"up",icon:b,description:"Session completion rate"},{title:"Avg. Questions Answered",value:Math.round(s.summary.total_responses/Math.max(s.summary.total_sessions,1)),change:5,trend:"up",icon:N,description:"Questions per session"},{title:"Customer Satisfaction",value:`${Math.round(s.summary.avg_score||0)}/10`,change:15,trend:"up",icon:o,description:"Average satisfaction score"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Customer Insights"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Deep dive into customer behavior and engagement patterns"})]}),e.jsxs(r,{variant:"outline",className:"flex items-center space-x-2 self-start sm:self-auto",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs",children:"Real-time Data"})]})]}),e.jsx(g,{columns:{xs:1,sm:2,md:2,lg:4},gap:"md",children:p.map((a,m)=>e.jsx(t,{className:"hover:shadow-md transition-shadow duration-200",children:e.jsxs(l,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:e.jsx(a.icon,{className:"w-4 h-4 text-blue-600"})}),e.jsxs(r,{variant:a.trend==="up"?"default":"destructive",className:"text-xs",children:[a.trend==="up"?"+":"-",a.change,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:a.title}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:a.value}),e.jsx("p",{className:"text-xs text-gray-500",children:a.description})]})]})},m))}),e.jsxs(v,{defaultValue:"segments",className:"w-full",children:[e.jsxs(y,{className:"grid w-full max-w-lg grid-cols-3",children:[e.jsx(h,{value:"segments",children:"Segments"}),e.jsx(h,{value:"journey",children:"Journey"}),e.jsx(h,{value:"behavior",children:"Behavior"})]}),e.jsx(u,{value:"segments",className:"space-y-6 mt-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsxs(n,{children:[e.jsxs(i,{className:"flex items-center space-x-2",children:[e.jsx(x,{className:"w-5 h-5"}),e.jsx("span",{children:"Customer Segments"})]}),e.jsx(d,{children:"Breakdown of customers by engagement level"})]}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-lg border-l-4 border-green-500",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-green-800",children:"Highly Engaged"}),e.jsx("p",{className:"text-xs text-green-600",children:"Completed 80%+ of sessions"})]}),e.jsx(r,{className:"bg-green-100 text-green-800",children:Math.round(s.summary.completed_sessions*.3)})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg border-l-4 border-blue-500",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Moderately Engaged"}),e.jsx("p",{className:"text-xs text-blue-600",children:"Completed 50-80% of sessions"})]}),e.jsx(r,{className:"bg-blue-100 text-blue-800",children:Math.round(s.summary.completed_sessions*.5)})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-orange-50 rounded-lg border-l-4 border-orange-500",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-orange-800",children:"Low Engagement"}),e.jsx("p",{className:"text-xs text-orange-600",children:"Completed less than 50%"})]}),e.jsx(r,{className:"bg-orange-100 text-orange-800",children:Math.round(s.summary.total_sessions-s.summary.completed_sessions)})]})]})})]}),e.jsxs(t,{children:[e.jsxs(n,{children:[e.jsxs(i,{className:"flex items-center space-x-2",children:[e.jsx(o,{className:"w-5 h-5"}),e.jsx("span",{children:"Engagement Trends"})]}),e.jsx(d,{children:"Customer engagement over time"})]}),e.jsx(l,{children:e.jsx("div",{className:"h-48 flex items-center justify-center border-2 border-dashed border-gray-200 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx(o,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"Engagement Chart"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Trend visualization will appear here"})]})})})]})]})}),e.jsx(u,{value:"journey",className:"space-y-6 mt-6",children:e.jsxs(t,{children:[e.jsxs(n,{children:[e.jsx(i,{children:"Customer Journey Analysis"}),e.jsx(d,{children:"Understanding how customers navigate through feedback sessions"})]}),e.jsx(l,{children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-2",children:Math.round(s.summary.total_sessions*.85)}),e.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Started Sessions"}),e.jsx("p",{className:"text-xs text-blue-600",children:"Initial engagement"})]}),e.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600 mb-2",children:Math.round(s.summary.total_sessions*.65)}),e.jsx("p",{className:"text-sm text-yellow-800 font-medium",children:"Mid-Session"}),e.jsx("p",{className:"text-xs text-yellow-600",children:"Continued engagement"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 mb-2",children:s.summary.completed_sessions}),e.jsx("p",{className:"text-sm text-green-800 font-medium",children:"Completed"}),e.jsx("p",{className:"text-xs text-green-600",children:"Full journey completion"})]})]})})})]})}),e.jsx(u,{value:"behavior",className:"space-y-6 mt-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsxs(n,{children:[e.jsx(i,{children:"Response Patterns"}),e.jsx(d,{children:"How customers interact with different question types"})]}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Multiple Choice"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Quick selections"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-bold",children:"92%"}),e.jsx("div",{className:"text-xs text-green-600",children:"High completion"})]})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Rating Scales"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Numerical feedback"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-bold",children:"87%"}),e.jsx("div",{className:"text-xs text-green-600",children:"Good completion"})]})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Open Text"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Written responses"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-bold",children:"74%"}),e.jsx("div",{className:"text-xs text-yellow-600",children:"Moderate completion"})]})]})]})})]}),e.jsxs(t,{children:[e.jsxs(n,{children:[e.jsx(i,{children:"Key Insights"}),e.jsx(d,{children:"Actionable insights from customer behavior"})]}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"📈 Peak engagement during 2-4 PM weekdays"})}),e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsx("p",{className:"text-sm font-medium text-green-800",children:"✅ Short sessions (5-7 questions) have highest completion"})}),e.jsx("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg",children:e.jsx("p",{className:"text-sm font-medium text-amber-800",children:"⚠️ Mobile users need simplified question formats"})}),e.jsx("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg",children:e.jsx("p",{className:"text-sm font-medium text-purple-800",children:"🎯 Personalized follow-ups increase engagement by 23%"})})]})})]})]})})]})]})},k=({organizationId:c})=>e.jsx(w,{permission:"view_analytics",organizationId:c,showRequiredRole:!0,fallback:e.jsxs("div",{className:"text-center p-8",children:[e.jsx("p",{className:"text-gray-500",children:"You need viewer-level access or higher to view customer insights."}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Contact your organization administrator for access."})]}),children:e.jsx(C,{organizationId:c})});export{k as CustomerInsightsTab,k as default};
