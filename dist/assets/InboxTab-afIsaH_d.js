import{i as b,s as f,r as g,g as N,j as e,C as y,d as v,e as w,f as k,k as _,a as C,S as h,l as q,B as u}from"./index-g7PNfYJJ.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=b("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]),E=async(r,t=1,c=20)=>{const n=(t-1)*c,a=n+c-1,{data:i,error:o,count:l}=await f.from("feedback_responses").select(`
      id,
      created_at,
      response_value,
      question_snapshot
    `,{count:"exact"}).eq("organization_id",r).order("created_at",{ascending:!1}).range(n,a);if(o)throw console.error("Error fetching feedback responses:",o),o;return{data:i,count:l}},I=({organizationId:r})=>{const[t,c]=g.useState(1),n=15,{data:a,isLoading:i,isError:o,error:l}=N({queryKey:["feedbackResponses",r,t,n],queryFn:()=>E(r,t,n),placeholderData:s=>s}),d=a==null?void 0:a.data,p=(a==null?void 0:a.count)??0,x=Math.ceil(p/n);return e.jsxs(y,{children:[e.jsxs(v,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{className:"w-6 h-6"}),e.jsx(w,{children:"Feedback Inbox"})]}),e.jsxs(k,{variant:"outline",children:[p," Total Responses"]})]}),e.jsx(_,{children:"View and manage individual feedback submissions."})]}),e.jsxs(C,{children:[e.jsxs("div",{className:"space-y-4",children:[i&&Array.from({length:5}).map((s,m)=>e.jsxs("div",{className:"p-4 border rounded-lg space-y-2",children:[e.jsx(h,{className:"h-4 w-3/4"}),e.jsx(h,{className:"h-4 w-1/2"}),e.jsx(h,{className:"h-4 w-1/4"})]},m)),o&&e.jsx("div",{className:"text-red-500 p-4 border border-red-200 bg-red-50 rounded-lg",children:e.jsxs("p",{children:["Error loading feedback: ",l instanceof Error?l.message:"An unknown error occurred"]})}),!i&&!o&&d&&d.length>0&&d.map(s=>{var m;return e.jsx("div",{className:"p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:((m=s.question_snapshot)==null?void 0:m.question_text)||"Question not available"}),e.jsx("p",{className:"text-gray-600 mt-1 text-sm",children:JSON.stringify(s.response_value)})]}),e.jsx("p",{className:"text-xs text-gray-500 whitespace-nowrap pl-4",children:q(new Date(s.created_at),{addSuffix:!0})})]})},s.id)}),!i&&(!d||d.length===0)&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(j,{className:"w-12 h-12 mx-auto mb-4"}),e.jsx("p",{className:"font-semibold",children:"Your inbox is empty"}),e.jsx("p",{className:"text-sm",children:"New feedback responses will appear here."})]})]}),x>1&&e.jsxs("div",{className:"flex justify-center items-center space-x-2 mt-6",children:[e.jsx(u,{variant:"outline",onClick:()=>c(s=>Math.max(1,s-1)),disabled:t===1,children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",t," of ",x]}),e.jsx(u,{variant:"outline",onClick:()=>c(s=>Math.min(x,s+1)),disabled:t===x,children:"Next"})]})]})]})},S=({organizationId:r})=>e.jsx(I,{organizationId:r});export{S as default};
